(function(w){var q=window.AmazonUIPageJS||window.P,ia=q._namespace||q.attributeErrors,l=ia?ia("DetailPageImageBlockAssets",""):q;l.guardFatal?l.guardFatal(w)(l,window):l.execute(function(){w(l,window)})})(function(w,q,ia){w.register("postMetric",function(){return{postCountMetric:function(l){if("undefined"!==typeof l){var b=q.ue;if(b){var a=b.count(l)||0;b.count(l,a+1)}}},postTimeMetric:function(l,b){if("undefined"!==typeof l&&"undefined"!==typeof b){var a=q.ue;a&&a.count(l,b)}}}});"use strict";w.register("logFailedInteractionMetric",
function(){return{isEnabled:!1}});w.register("postEarlyMetric",function(){return null});"use strict";w.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(l,b,a,h){l=l.extend(!0,{},a,h);var g=new b(l);w.register("ImageBlockAPI",function(){return g.api});return g});"use strict";w.when("A","jQuery").execute(function(l,b){l.on("a:image:load:landingImage",function(){q.performance&&performance.now&&q.ue&&ue.count&&ue.count("DPLandingImageHighResDownloadTime",
performance.now())});l.loadDynamicImage(b("#landingImage"))});"use strict";w.when("ImageBlockATF","atf").register("ImageBlockAiryLoader",function(l){function b(a){a&&(w.load.js(a),q.performance&&performance.now&&q.ue&&ue.count&&ue.count("DPAiryDownloadStartTime",q.parseInt(performance.now())))}function a(a){a&&w.load.css(a)}var h=l.airyConfig;h===ia?w.when("ImageBlockBTF").execute(function(g){h=g.airyConfig;b(h.jsUrl);a(h.cssUrl)}):(b(h.jsUrl),a(h.cssUrl))});"use strict";w.when("jQuery","ImageBlockModel",
"ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(l,b,a,h,g){var d={};return function(f){var c=this;c.dispatch=function(a,b){var c=d[a];h.isDefined(c)&&l.each(c,function(a,d){d.call(q,b)})};c.register=function(a,b){h.isDefined(d[a])||(d[a]=[]);"function"===typeof b&&d[a].push(b)};c.model=new b(f,c);c.view=new a(f,c,c.model);c.api=new g(f,c,c.model);c.init=function(){c.model.init();c.view.init()};c.init()}});"use strict";w.when("A","imageBlockUtils").register("ImageBlockModel",
function(l,b){function a(a,d,c,g,f){b.isDefined(a)&&(G.type=a);b.isDefined(d)&&(G.index=d);b.isDefined(c)&&(G.thumbnailIndex=c);b.isDefined(g)&&(G.variant=g);b.isDefined(f)&&(G.color=f)}function h(b){a("image",0,0,"MAIN",b||c.landingAsinColor||c.defaultColor)}function g(b){b=b.data;I=l.copy(G);a(b.type,b.index,b.thumbnailIndex,b.variant,b.color)}function d(a){g(a);a=l.copy(a);a.data=l.copy(G);n.dispatch("updateView",a)}function f(){I=l.copy(G);h(G.color)}var c,n,G={},I={},C,q;return function(a,b){n=
b;c=a;n.register("updateSelection",d);n.register("updateModel",g);n.register("resetModel",f);this.init=function(){h()};this.getCurrentItem=function(){return l.copy(G)};this.getPreviousItem=function(){return l.copy(I)};this.setCurrentEvent=function(a){C=a};this.getCurrentEvent=function(){return C};this.setImmersiveViewModalInstance=function(a){q=a};this.getImmersiveViewModalInstance=function(){return q};this.updateTitle=function(a){c.title=a}}});"use strict";w.when("ImageBlockBTF","postMetric").execute(function(l,
b){function a(a,b,f,c,h){function G(a){"click"===a.type&&c.postCountMetric("thumbClick");"click"===a.type&&u.overrideAltImageClickAction?p.dispatch("thumbActionClick",a):p.dispatch("updateSelection",a)}function I(a){u.useClickZoom||p.dispatch("imageClick",a)}function C(a){u.useClickZoom||p.dispatch("imageHover",a)}function J(a){p.dispatch("button360Click",a)}function A(b){!f.isDefined(b)||"swatchClick"!==b.type&&"updatedData"!==b.type?(F.update(b),"swatchHover"!==b.type&&x.getPreviousItem().thumbnailIndex!==
b.data.thumbnailIndex&&c.postCountMetric(b.data.type+"ThumbnailSelected"),a.trigger("image-block-thumbnail-selected",b.data)):(F.render(b.data.color,!1,b.onload),b={hasComponents:!0,components:[{name:"mainimage"},{name:"thumbnail"}]},"function"===typeof q.markFeatureRender&&q.markFeatureRender("imageblock",b))}function y(a){p.dispatch("resize",a)}function O(a){f.selectThumbnail(a,E)}function P(){"function"===typeof q.markFeatureInteractive&&q.markFeatureInteractive("imageblock",{hasComponents:!0,
components:[{name:"mainimage",events:["click"],alwaysInteractive:!0}]})}function L(){"function"===typeof q.markFeatureInteractive&&q.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["hover"],alwaysInteractive:!0},{name:"thumbnail",events:["click","hover"],alwaysInteractive:!0}]});1===l.useIV?w.when("a-modal").execute(function(){P()}):P();u.disableHoverOnAltImages||a.declarative("thumb-action",["mouseenter","mouseleave"],G);a.declarative("thumb-action",["click"],
G);a.declarative("main-image-click",["click"],I);a.declarative("main-image-click",["mouseenter","mouseleave"],C);a.declarative("button-360-click",["click"],J);a.on("resize",y)}function k(a){var b=a.data,e;b&&"ingress"!==b.type&&"click"===a.type&&(e=a);return e}function D(a){var b=x.getCurrentItem(),e={type:"click"};e.$declarativeParent=a;e.data=b;return e}var F,u,p,x,E;return function(a,c,e){F=this;u=a;p=c;x=e;E=b("#imageBlock #altImages ul");var m=b("#imageBlock .canvas"),f=b("#main-image-container"),
g;F.subViews=[];for(c=0;c<h.length;c++)F.subViews.push(new h[c](a,e,F,p));F.render=function(a,e,c){var k=0;E.find(".item").remove();a=a||x.getCurrentItem().color;b.each(F.subViews,function(b,d){k=d.render(a,k,m,E,f,e,c)||k});var h=E.find(".a-button-selected").closest(".a-declarative");g=D(h)};F.init=function(){E=b("#imageBlock #altImages ul");var a=E.find(".a-button-selected").closest(".a-declarative"),e=a.data("action"),a=a.data(e)||{};a.color=u.landingAsinColor||u.defaultColor;p.dispatch("updateModel",
{data:a});F.render(a.color,!0);u.isDebug&&q.console&&console.log(u);p.register("updateView",A);p.register("selectThumbnail",O);L()};F.update=function(a){b.each(F.subViews,function(b,e){e.update(a)});u.usePeekHover&&("mouseleave"===a.type?p.dispatch("updateSelection",g):"click"===a.type&&(g=k(a)||g))}}}var h=["A","jQuery","imageBlockUtils","postMetric"].concat(l.views);w.when.apply(w,h).register("ImageBlockView",function(){for(var b=arguments[0],d=arguments[1],f=arguments[2],c=arguments[3],h=[],l=
4,I=arguments.length;l<I;l++)h.push(arguments[l]);return a(b,d,f,c,h)})});"use strict";w.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(l,b,a,h,g,d,f){function c(e,d,c,m){if(!a.isjQueryObjDefined(e.find(".a-button-selected"))){var k=x.getCurrentItem();if(!m||"chromeless-video"!==k.type||!p.autoplayVideo){m=0;"image"===k.type&&(m=Math.max(I(k.color,k.variant),0));var f=d+m;f>=c&&(m=0,f=d);
d=a.getImageHash(k.color,m,p);-1!==d&&(E.dispatch("updateModel",{data:{index:m,thumbnailIndex:f,variant:d.variant,type:"image"}}),d=e.find(".item").get(f),a.selectGivenThumbnail(b(d),e))}}}function n(e,m,k){m=p.colorImages&&p.colorImages[m];var g=e;a.isDefined(m)&&(b.each(m,function(b,d){e<p.maxAlts&&(a.createThumbnail({type:"image",index:b,thumbnailIndex:e,variant:d.variant},d.thumb,K,"imageThumbnail"),e++)}),d.isEnabled&&f.logAltImgRequestPlacedOnThumbnails(b,d,x),c(K,g,e,k));return e}function G(a,
e){if("image"===a.type){var d=b("#image-canvas-caption #canvasCaption"),m,c=p.staticStrings,k=p.colorImages,f=a.color,g=a.index;e&&p.useIV?m=c.clickToExpand:k[f]&&k[f][g].hiRes&&p.useHoverZoom?(m=p.useHoverZoomIpad?c.touchToZoom:p.useClickZoom?c.clickToZoom:c.rollOverToZoom,p.hoverZoomIndicator&&(m="\x3cimg src\x3d'"+p.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+m)):p.useIV&&(m=c.clickToExpand);d.html(m)}}function I(b,e){return a.getIndexForVariant(b,e,p)}function C(d,m){var c="a-dynamic-image";
if(!p.acEnabled){var k;b.each(d.main,function(b,e){a.isDefined(k)||(k=parseFloat(e[1]/e[0])<=parseFloat(p.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});c+=k}var f=a.getMaxDimensionsOfMainImage(d.main,e,p),g=f[0],h=f[1],f=b("\x3cdiv\x3e\x3c/div\x3e"),g={"max-height":g,"max-width":h};f.addClass(c).css(g).attr({"data-old-hires":d.hiRes,"data-a-manual-replacement":"true",onload:m}).data("a-dynamic-image",d.main);return f}function q(a){var b=v.find(".swatchHoverExp");a=C(a);b.find(".imgTagWrapper").html(a);
l.loadImageManually(a);return b}function A(a){var b=e.css("height");null!==b&&a.find(".imgTagWrapper").css("height",b);a.addClass("selected");p.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(p.imgTagWrapperClasses)}function y(b,e){if("image"===b.type||"unavailable"===b.type||"lazy-loaded"===b.type){a.isDefined(e)&&g.postCountMetric("mainImageUpdateOnTwisterVariationClick");var m=a.getImageHash(b.color,b.index,p);if(-1===m)return m={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},
a.lazyLoadingRequired(b,x,p)?L(b,!1,e):(E.dispatch("updateModel",m),a.showUnavailable(b.color)),-1;var c=v.find(".item.itemNo"+b.thumbnailIndex);if(!a.isjQueryObjDefined(c)){var c=b.thumbnailIndex,c=v.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+c+" maintain-height"),k=C(m,e);c.find(".placeHolder").replaceWith(k);v.find(".list").append(c);l.loadImageManually(k)}A(c);E.dispatch("loadMagnifier");G(b);p.useIV&&a.isDefined(m.hiRes)&&c.css("cursor",
"pointer");b.isUserGenerated&&(c=x.getPreviousItem(),k=b.variant,a.isDefined(k)&&c.thumbnailIndex!==b.thumbnailIndex&&(d.isEnabled&&f.logAltImgRequestServed(d),g.postCountMetric("ImageThumbnailSelectedVariant:"+k),0===k.indexOf("IG")&&(g.postCountMetric("IGImageSelectedVariant:"+k),g.postCountMetric("IGImageSelectedEvent:"+b.interaction))));l.trigger("dp:image-block:update",m)}}function O(b){var e=Math.max(I(b.color,x.getCurrentItem().variant),0),e=a.getImageHash(b.color,e,p);if(-1===e)return a.lazyLoadingRequired(b,
x,p)?a.lazyLoadOnHoverEnabled(p)&&(P(".3",!0),a.spinner(v,!0),l.delay(function(){x.getCurrentEvent().data===b&&L(b,!0)},500)):a.showUnavailable(b.color),-1;var d=q(e);g.postCountMetric("mainImageUpdateOnTwisterVariationHover");A(d);l.trigger("dp:image-block:update",e)}function P(a,e){e?v.css("opacity",a):b("#imageBlock").css("opacity",a)}function L(b,e,d){m=e;z=d;var c=b.color,f=p.colorToAsin[c];if(f&&f.asin){var l={};l.params={asin:f.asin,productGroupID:p.productGroupID,color:c};l.success=function(h){h?
(g.postCountMetric("lazyloadImageBlockOnTwisterUpdateSuccess"),a.ajaxState(f.asin,"success"),p.colorImages[c]=h.colorImage,a.isDefined(p.spin360ColorEnabled)&&(p.spin360ColorEnabled[c]=h.enable360),c===b.color&&(e&&m?(g.postCountMetric("lazyloadImageBlockOnTwisterHoverSuccess"),b===x.getCurrentEvent().data&&(k(b),O(b))):(g.postCountMetric("lazyloadImageBlockOnTwisterClickSuccess"),h={type:"updatedData",data:x.getCurrentItem(),onload:d||z},E.dispatch("updateView",h))),w.register(a.rankedImagesReadyEvent(f.asin))):
(g.postCountMetric("lazyloadImageBlockOnTwisterUpdateFail"),a.ajaxState(f.asin,"fail"))};l.error=function(){g.postCountMetric("lazyloadImageBlockOnTwisterUpdateFail");a.ajaxState(f.asin,"fail")};l.indicator=a.spinner(v);a.ajaxState(f.asin,void 0)&&"fail"!==a.ajaxState(f.asin,void 0)||(e?g.postCountMetric("lazyloadImageBlockOnTwisterHover"):g.postCountMetric("lazyloadImageBlockOnTwisterClick"),P(".3",e),h.load("/gp/product/features/apparel-main-image/ranked-images.html",l),a.ajaxState(f.asin,"sent"));
return p.colorImages&&p.colorImages[c]}}function k(e,c){a.lazyLoadingRequired(e,x,p)||(b("#imageBlock").css("opacity","1"),v.css("opacity","1"),a.spinner(v,!1),v.find("li").removeClass("selected"),b("#image-canvas-caption #canvasCaption").empty(),a.hideUnavailable(),c&&v.find(".list .item").remove())}function D(){var c=v.find(".item .imgTagWrapper"),d=a.getContainerHeight(e,p.holderRatio,p.holderMaxHeight);0<d&&(e.height(d),c.height(d));v.find("img.a-dynamic-image").each(function(){var c=b(this);
c.data("a-manual-replacement")&&l.loadDynamicImage(this);var d=c.data("a-dynamic-image"),d=a.getMaxDimensionsOfMainImage(d,e,p);c.css({"max-height":d[0]+"px","max-width":d[1]+"px"})})}function F(a){G(x.getCurrentItem(),"mouseenter"===a.type)}var u,p,x,E,K,v,e,m,z,r;return function(b,c,d,m){u=this;p=b;x=c;E=m;p.colorImages[p.landingAsinColor]=p.colorImages[p.defaultColor];u.render=function(b,c,d,m,f,g,h){v=d;K=m;e=f;r=n(c,b,g);g||(b=x.getCurrentItem(),a.lazyLoadingRequired(b,x,p)&&E.dispatch("updateModel",
{data:{type:"lazy-loaded"}}));k(x.getCurrentItem(),!g);y(x.getCurrentItem(),h);return r};u.update=function(b){var e=b.data;x.setCurrentEvent(b);"ingress"!==e.type&&k(b.data,!1);"swatchHover"===b.type?e.color===x.getCurrentItem().color?y(x.getCurrentItem()):b.captured||-1===O(e)||(b.captured=!0):"image"===e.type&&(e.interaction=b.type,e.isUserGenerated=!0,"mouseenter"===b.type&&g.postCountMetric("dpcc_imageThumbHovered_"+(e.thumbnailIndex+1)+"_"+r),y(e),p.usePeekHover&&"click"!==b.type||(a.selectGivenThumbnail(b.$declarativeParent,
K),"click"===b.type&&(g.postCountMetric("dpcc_imageThumbClicked_total"),g.postCountMetric("dpcc_imageThumbClicked_"+(e.thumbnailIndex+1)+"_"+r))))};p.overrideAltImageClickAction&&a.addTag("clickEnabledOnAltImages");E.register("imageHover",F);E.register("resize",D)}});"use strict";w.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",function(l,b,a,h,g,d){function f(a){P?a.css("cursor","url('"+C.staticImages.zoomIn+"'), auto"):
(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function c(b){var c=b.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);b={};if(a.isDefined(c))for(var c=c[1].split("_"),d=0;d<c.length;d++){var f=c[d].match(/^([A-Z]+)(\d+(\.\d+)?)$/);a.isDefined(f)&&(b[f[1]]=parseInt(f[2],10))}return b}function n(n,k){function D(){var a;k.useClickZoom?(a=k.offsetInClickZoom,a=[Math.min(1,Math.max(0,I[0]-(A[0]+a))/(A[2]-2*a)),Math.min(1,Math.max(0,I[1]-(A[1]+a))/(A[3]-2*a))]):a=
r&&r.updatePosition();if(a&&z&&z.detailSize){var b=[z.detailSize[0]-z.rect.width,z.detailSize[1]-z.rect.height];l.capabilities.rtl?z.detailImage.get(0).style.right=-(a[0]*b[0])+"px":z.detailImage.get(0).style.left=-(a[0]*b[0])+"px";z.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function F(a){return a.offsetParent().hasClass("a-dynamic-image-container")}function u(a){var e=R?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:"";I=R?[e.pageX,e.pageY]:[a.pageX,a.pageY];if(l.capabilities.rtl){var c=
b(q).width();I=R?[c-e.pageX,e.pageY]:[c-a.pageX,a.pageY]}}function p(a){R&&a.preventDefault();u(a);k.useClickZoom?a=[A[0],A[1],A[0]+A[2],A[1]+A[3]]:(a=r?r.offset:n.offsetParent().offset(),a=C.acEnabled?[a.left,a.top,e.width()+a.left,e.height()+a.top]:[y[0]+a.left,y[1]+a.top,y[0]+y[2]+a.left,y[1]+y[3]+a.top]);I[0]<a[0]||I[1]<a[1]||I[0]>=a[2]||I[1]>=a[3]||C.acEnabled&&!F(n)?(k.fadeMagnifier?U||(U=!0,Z=setTimeout(function(){x(!0)},500)):k.useClickZoom||x(),B&&(B=!1,clearTimeout(aa))):(B||(B=!0,aa=setTimeout(function(){h.postCountMetric("dppc_hoverZoomOpened");
g.isEnabled&&d.logHoverZoomRequestServed(g)},1E3)),k.fadeMagnifier&&U&&(U=!1,clearTimeout(Z)),D())}function x(a){a&&v.suppressMagnifier(!0);if(Q&&(z&&z.hide(),r&&(r.destroy(),r=null),Q=!1,R?(n.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),b(document).trigger("disengaged.magnifier")):b(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),G(),a))n.one("click.magnifier touchstart.magnifier",function(a){E(a,!0)})}function E(a,c){c&&v.suppressMagnifier(!1);if(!Q&&
!ba&&(0===ea&&(h.postCountMetric("dppc_hoverTime",new Date-(q.ue&&q.ue.t0||0)),ea=1),J[Y]||(h.postCountMetric("dppc_hoverMain"),J[Y]=1),y=[n.position().left,n.position().top,n.width(),n.height()],Y&&(u(a),z?z.refit().show():z=new O,k.useClickZoom||(r=r||new w),A=z.getWindowSize(),D()),Q=!0,R?(n.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",p).bind("touchend.magnifier",x),b(document).trigger("engaged.magnifier")):(C.acEnabled?e.unbind("mousemove.magnifier"):n.unbind("mousemove.magnifier"),
b(document).trigger("engaged.magnifier").bind("mousemove.magnifier",p)),c)){var d=b("#zoomWindow");if(0<d.length)d.one("click.magnifier touchend.magnifier",function(a){x(!0)})}}function G(){k.useHoverZoom&&(R?n.bind("touchstart.magnifier touchmove.magnifier",E):C.acEnabled?F(n)&&e.bind("mousemove.magnifier",E):n.bind("mousemove.magnifier",E))}var v=this,e=n.offsetParent(),m={detailImageUrl:n.attr("data-old-hires"),location:"over",locationElement:n,prelaod:"ready",zIndex:50,offsetInClickZoom:50};k=
b.extend(m,k);k.adjustment=[10,0,-10,0];var z=null,r=null,I=null,y=null,A=null,M={"null":1,"":1,undefined:1},Q=!1,ba=!1,Y=k.detailImageUrl,R=k.useHoverZoomIpad||0,ea=0,J={},w=function(){function a(b){var e=Math.round(Math.min(n.width(),z.rect.width/b));b=Math.round(Math.min(n.height(),z.rect.height/b));g.css({width:e,height:b});c=[e,b]}var e=this,c=[0,0],d=(z.detailSize&&z.detailSize[0]||5E8)/y[2],m=(z.detailSize&&z.detailSize[1]||5E8)/y[3],d=m>d?m:d;b("#magnifierLens").remove();var g=b("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});
k.generalImageUrls.zoomLensBackground&&g.css({backgroundImage:"url("+k.generalImageUrls.zoomLensBackground+")"});C.showMagnifierOnHover?f(g):g.css("cursor","pointer");e.updatePosition=function(){var a=[y[2]-c[0],y[3]-c[1]],b=0>=a[0]?.5:Math.max(0,Math.min(1,(I[0]-c[0]/2-y[0]-e.offset.left)/a[0])),d=0>=a[1]?.5:Math.max(0,Math.min(1,(I[1]-c[1]/2-y[1]-e.offset.top)/a[1])),m=y[0]+Math.round(b*a[0]),a=y[1]+Math.round(d*a[1]);g.get(0).style.left=m+"px";g.get(0).style.top=a+"px";return[b,d]};e.destroy=function(){g.remove()};
e.offset=n.offsetParent().offset();a(d);e.updatePosition();g.appendTo(n.parent());z.detailImage[0].complete||z.detailImage.load(function(){var b=z.detailImage.width()/y[2];a(b);e.updatePosition()})};w.preload=function(){v.preload(k.generalImageUrls.lensBackgroundUrl)};var O=function(){function e(){var c={};if("over"===k.location){var c=k.useClickZoom,d={},g=b("#leftCol"),l=b("#centerCol"),z=b("#rightCol"),p=b("#hover-zoom-end"),r=b("#actionPanelContainer"),u=a.isjQueryObjDefined(g)?g.outerHeight():
l.outerHeight();d.top=a.isjQueryObjDefined(g)?g.offset().top:l.offset().top;d.bottom=u+d.top;d.right=a.isjQueryObjDefined(z)?z.offset().left:r.offset().left;d.left=c?0:g.offset().left+g.outerWidth();a.isjQueryObjDefined(p)&&p.offset().top>d.bottom&&(d.bottom=p.offset().top);c=d}else"right"===k.location&&(c=n.offset(),c={left:c.left+n.outerWidth(),top:c.top,right:c.left+n.outerWidth()+400,bottom:c.top+400});k.minHeightElement&&(c.bottom=Math.max(c.bottom,c.top+b(k.minHeightElement).outerHeight()));
c.bottom=Math.min(c.bottom,b(q).scrollTop()+b(q).height());c.left+=f[0];c.top+=f[1];c.right+=f[2];c.bottom+=f[3];c.width=c.right-c.left;c.height=c.bottom-c.top;k.enhancedHoverOverlay&&a.isDefined(q.pageXOffset)&&(d=b(q).width(),c.width=d-c.left+q.pageXOffset-18,c.height-=14);h.css({left:c.left,top:c.top,width:c.width,height:c.height});m.rect=c;return m}function d(a){var b=new Image;m.detailSize=[0,0];b.onload=function(){m.detailSize=[b.width,b.height];D()};b.src=a.attr("src");if(0<b.width&&0<b.height)m.detailSize=
[b.width,b.height];else if(k.detailImageSize)m.detailSize=k.detailImageSize;else{a=c(b.src);var e=y[2]/y[3];a.SS||a.AA?(a=a.SS||a.AA,m.detailSize=[a,a]):a.SX?m.detailSize=[a.SX,Math.round(a.SX/e)]:a.SY?m.detailSize=[Math.round(a.SY*e),a.SY]:a.SL&&(m.detailSize=1<=e?[a.SL,Math.round(a.SL/e)]:[Math.round(a.SL*e),a.SL])}}var m=this,f=k.adjustment;b("#zoomWindow").remove();var g={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:k.zIndex};k.enhancedHoverOverlay&&(g.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",
g.border="1px solid #949494",g.borderColor="rgb(148,148,148)");var h=b("\x3cdiv id\x3d'zoomWindow' /\x3e").css(g);k.fadeMagnifier&&h.fadeIn(200);k.useClickZoom&&(P?h.css("cursor",'url("'+k.zoomOutIcon+'"), auto'):(h.css("cursor","-webkit-zoom-out"),h.css("cursor","-moz-zoom-out"),h.css("cursor","zoom-out")));m.updateImage=function(a){a=b("\x3cimg id\x3d'detailImg' src\x3d'"+a+"'/\x3e").css("position","absolute");m.detailImage&&m.detailImage.remove();h.append(a);b(document).trigger("updated.magnifier");
m.detailImage=a;d(m.detailImage)};m.refit=function(){e();d(m.detailImage);return m};k.fadeMagnifier?(m.show=function(){h.fadeIn(200);return m},m.hide=function(){h.fadeOut(200);return m}):(m.show=function(){h.show();return m},m.hide=function(){h.hide();return m});m.destroy=function(){h.remove();return m};m.getWindowSize=function(){return[m.rect.left,m.rect.top,m.rect.width,m.rect.height]};m.updateImage(Y);e();h.appendTo(document.body)},U=!1,Z,B=!1,aa;v.preload=function(a){a=b.makeArray(a);for(var c=
a.length,e=0;e<c;e++)a[e]instanceof Array?v.preload(a[e]):"string"===typeof a[e]&&a[e]&&!M[a[e]]&&(M[a[e]]=new Image,M[a[e]].src=a[e])};v.changeImage=function(a,c){Q&&x();Y=c;n.attr("src",a);v.preload(a);y=[n.position().left,n.position().top,n.width(),n.height()];c&&("immediately"===k.preload?v.preload(c,!0):b(q).ready(function(){v.preload(c)}),z?z.updateImage(c):n.attr("data-old-hires",c))};v.destroy=function(){C.acEnabled?e.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier"):
n.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");b(document).unbind("mousemove.magnifier");r&&r.destroy();r=null;z&&z.destroy();z=null};v.detailImage=function(){return z.detailImage};v.suppressMagnifier=function(a){ba=a};v.isEngaged=function(){return Q};v.engageMagnifier=E;v.disengageMagnifier=x;n[0].complete?G():n.one("load",G);v.preload(n.attr("src"));q.performance&&performance.now&&q.ue&&ue.count&&ue.count("MagnifierImageDownload",performance.now());if(k.preload){var ka=
k.detailImageUrl,m=function(){v.preload(ka,!0);k.useClickZoom||w.preload()},W=k.preload;W.constructor!==Array&&(W=[W]);for(var t=0;t<W.length;t++)if("immediately"===W[t])m();else if(b(q)[W[t]])b(q)[W[t]](m);else b(q).bind(W[t],m)}return v}function G(){if(C.useHoverZoom){var c={adjustment:[0,0,1,1],generalImageUrls:C.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:199,useHoverZoomIpad:C.useHoverZoomIpad,useHoverZoom:C.useHoverZoom,useClickZoom:C.useClickZoom,fadeMagnifier:C.fadeMagnifier,
zoomOutIcon:C.staticImages.zoomOutCur,enhancedHoverOverlay:C.enhancedHoverOverlay||C.atfEnhancedHoverOverlay};y&&(y.destroy(),y=ia);var f=w.find(".image.item.selected img[data-old-hires]").not("[data-old-hires\x3d'']");a.isjQueryObjDefined(f)?C.useClickZoom?(f.one("click.loadmagnifier touchstart.loadmagnifier",function(a){y=new n(f,c);y.engageMagnifier(a,!0)}),P?f.css("cursor",'url("'+C.staticImages.zoomInCur+'"), auto'):(f.css("cursor","-webkit-zoom-in"),f.css("cursor","-moz-zoom-in"),f.css("cursor",
"zoom-in"))):y=new n(f,c):g.isEnabled&&d.logHoverZoomApplicability(b,g)}}var I,C,J,A,y,w,P=navigator.userAgent.match(/msie|trident/i);return function(a,b,c,d){I=this;C=a;J=b;g.refToModel=J;A=d;I.render=function(a,b,c,d,f,g){w=c;y&&(y.destroy(),y=ia)};I.update=function(a){};A.register("loadMagnifier",G);A.register("resize",G)}});"use strict";w.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(l,b,a,h){function g(b,d,f){b=(b=f?f:a.getColorFromState(d.getState().hovered_variations,
c))&&""!==b?b:c.defaultColor;G.dispatch("updateView",{type:"swatchHover",data:{color:b}});h.postCountMetric("swatchHover")}function d(b,d,f,g){b=(b=g?g:a.getColorFromState(d.getState().selected_variations,c))&&""!==b?b:c.defaultColor;b===n.getCurrentItem().color?"function"===typeof f&&f():(G.dispatch("updateSelection",{type:"swatchClick",data:{color:b},onload:function(){var a={hasComponents:!0,components:[{name:"mainImage"}]};"function"===typeof q.markFeatureRender&&q.markFeatureRender("imageblock",
a);f()}}),h.postCountMetric("swatchClick"))}var f,c,n,G;return function(a,b,h,A){f=this;c=a;n=b;G=A;l.on("image-block-twister-swatch-hover",g);l.on("image-block-twister-swatch-click",d);f.render=function(a,b,c,d,f){};f.update=function(a){}}});"use strict";w.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric","vse_ns_videoPlayer").register("ImageBlockVideoView",function(l,b,a,h,g,d,f){function c(a,c,e,d){!k.autoplayVideo||X||k.useChromelessVideoPlayer?!h.isjQueryObjDefined(a.find(".a-button-selected"))&&
(e=D.getCurrentItem(),!d||k.prioritizeVideos||"chromeless-video"===e.type&&k.autoplayVideo)&&(d=h.getVideoHash(e.color,0,k),-1!==d&&(c+=0,F.dispatch("updateModel",{data:{index:0,thumbnailIndex:c,variant:d.variant,type:k.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),c=a.find(".item").get(c),h.selectGivenThumbnail(b(c),a))):(h.selectGivenThumbnail(a.find("img:last"),a),h.fadeToThumbnail(a.find("img").length-1,E,a))}function n(a){var b=D.getCurrentItem().color;if(k.useChildVideos&&
!k.colorToVideo[b]){var c=function(){if(a){k.colorToVideo[b]=a;var c={type:"updatedData",data:D.getCurrentItem()};F.dispatch("updateView",c)}};k.lazyLoadExperienceDisabled?c():w.when(h.rankedImagesReadyEvent(k.colorToAsin[b].asin)).execute(function(){c()})}}function G(a){if(!k.useChildVideos)return h.lazyLoadingRequired(D.getCurrentItem(),D,k)?void 0:k.videos;if(k.colorToVideo[a])return k.colorToVideo[a];var b=k.colorToAsin[a];if(b&&b.asin){var c={};c.params={asin:b.asin,productGroupID:k.productGroupID,
useAiryVideoPlayer:!0,useChromelessVideoPlayer:k.useChromelessVideoPlayer,isUDP:k.isUDP};k.isDPXFeatureEnabled||(c.success=function(a){n(a)},g.load("/gp/product/features/apparel-main-image/videos.html",c));return k.colorToVideo&&k.colorToVideo[a]}}function q(){F.dispatch("selectThumbnail",h.useTabbedImmersiveView(k)?1:0)}function C(c,e,m,f){return a.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:c[0],streamingUrls:e.url,swfUrl:m.swfUrl,foresterMetadataParams:m.foresterMetadataParams,backgroundColor:"transparent",
flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=h.isjQueryObjDefined(c.find("video"))?"HTML5":"FLASH";d.postCountMetric("dppc_chromelessVideo:"+a)},playing:function(){c.parent().css("z-index",8)},videounsupported:function(){q();d.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){q();d.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){v.seek(0)}},cuePoints:[{values:e.durationSeconds-1,type:"position",
callback:function(a,e,d){a=d.durationSeconds-d.playheadTimeSeconds;c.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*a,.1,function(){c.parent().css({"background-color":"transparent","z-index":-1});q();b(this).show().css("opacity",1)})}}]})}function J(a){if("chromeful-video"===a.type||"chromeless-video"===a.type){var c=h.getVideoHash(a.color,a.index,k);if(-1===c)return-1;if("chromeful-video"===a.type){a=E.width()/E.height();var d=parseInt(c.videoWidth,10),f=parseInt(c.videoHeight,
10);h.updateAspectRatio(a,d,f,p);v?(v.show(),h.loadMediaIntoAiry(v,c,e,k.tabletWeb)):v=k.tabletWeb?r:h.createAiryInstanceForChromeful(p,c,e,null,k.autoplayVideo,E,x,u);b:if(h.useTabbedImmersiveView(k)){if(1<h.getVideosCount(D.getCurrentItem().color,k)){if(h.isDefined(K)){x.show();break b}K=b('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(k.staticStrings.watchMoreVideos);x.find("#videoCaption").append(K);l.declarative.create(K,"videoIngressClick",m)}h.playVideoInImmersiveView(k,
D.getCurrentItem().color)&&(l.declarative.create(p,"videoIngressClick",m),p.attr&&p.attr("data-ux-click",""),p.children().css("z-index","-1"),p.css("display","inline-block"))}else x.find("#videoCaption").text(k.staticStrings.playVideo),x.show();c=v;k.autoplayVideo&&c&&!X&&(h.toggleVideoCaption(x),c.setVolume(0),c.show(),c.play(),X=!0)}else v?(v.show(),h.loadMediaIntoAiry(v,c,e,k.tabletWeb),v.play(),x.show()):(v=C(p,c,e))&&v.play()}}function A(a,e,f){var g=G(e);e=a;var l=h.isDefined(g)&&0<g.length&&
k.alwaysIncludeVideo?1:0;h.isDefined(g)&&0<g.length&&!k.alwaysIncludeVideo&&a===k.maxAlts&&d.postCountMetric("IBVideoDrop");l&&a===k.maxAlts&&(u.find(".item:last").remove(),a--);h.isDefined(g)&&(b.each(g,function(c,e){if(a<k.maxAlts){var f=k.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",l={type:f,index:c,thumbnailIndex:a,variant:e.variant};m={type:"video-ingress",index:c,thumbnailIndex:a,variant:e.variant};h.useTabbedImmersiveView(k)&&("chromeful-video"===f&&(H+=" videoBlockIngress  videoBlockDarkIngress",
e.thumb=e.thumb.replace("_PKmb-play-button-overlay-thumb","")),k.altsOnLeft||(H+=" a-align-top"));h.createThumbnail(l,e.thumb,u,H);if(2===k.dp60VideoPosition){var z=u,l=k.dp60VideoPosition;if(0!==l){var p=z.children(".imageThumbnail"),z=z.children(".videoBlockIngress");p&&z&&p[l-1]&&b(p[l-1]).before(z[0])}}h.useTabbedImmersiveView(k)&&(y(u.find(".videoBlockIngress img"),k.videoIngressATFSlateThumbURL),l=1<g.length?"multiple-videos":"one-video",(p=1<g.length?g.length+" "+k.staticStrings.multipleVideos:
k.staticStrings.singleVideo)&&u.find(".videoBlockIngress").append(u.find("#videoCount_template").clone().text(p).attr("id","videoCount")).addClass(l));T||(T=!0,d.postCountMetric("chromeless-video"===f?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));a++}if(h.useTabbedImmersiveView(k))return!1}),c(u,e,a,f));return a}function y(a,b){var c=a.attr("src");if(c&&b){a.attr("src",b);var e=new Image;e.onload=function(b){a.attr("src",c)};e.src=c}}function O(a){v&&v.pause();a.data=m;a.clickTimeStamp=
a.$event.timeStamp;var b="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";F.dispatch("imageClick",a);d.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);d.postCountMetric(b)}function P(a){r=a.player;r.hide=function(){r.pause();l.$("#main-video-container").find(".vse-player-container").hide()};r.show=function(){l.$("#main-video-container").find(".vse-player-container").show();r.play()};r.getMediaSourceInfo=function(){return h.getMediaSourceInfo()}}var L,k,D,F,u,p,x,
E,K,v,e,m,z,r,T=!1,X=!1,H="videoThumbnail";return function(a,c,g,r){L=this;k=a;D=c;F=r;e=k.airyConfig;k.colorToVideo={};k.colorToVideo[k.landingAsinColor]=k.colorToVideo[k.defaultColor]=k.videos;L.render=function(a,c,e,d,m,g){u=d;p=m.find("#main-video-container");x=p.parent().find("#video-canvas-caption");E=b("#main-image-container");k.useChromelessVideoPlayer||p.addClass("chromeful-container");z=A(c,a,g);J(D.getCurrentItem());h.useTabbedImmersiveView(k)&&l.declarative("videoIngressClick",["click"],
O);a=D.getCurrentItem().color;c=h.getVideoHash(a,0,k);-1!==c&&k.tabletWeb&&(a=h.getNilgiriServiceAjaxRequest(k,a,c),f.get(l,"#main-video-container",a,function(){l.$("#main-video-container").find(".vse-player-container").hide()},function(){l.$("#imageBlock #altImages ul").find("li.videoThumbnail").hide()}));return z};L.update=function(a){var b=a.data;"ingress"!==b.type&&v&&(v.hide(),p.parent().css("z-index",-1),x.hide());if("swatchHover"===a.type)b.color===D.getCurrentItem().color?J(D.getCurrentItem()):
a.captured||h.lazyLoadingRequired(b,D,k)&&!h.lazyLoadOnHoverEnabled(k)&&J(D.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type)"mouseenter"===a.type&&d.postCountMetric("dpcc_videoThumbHovered_"+(b.thumbnailIndex+1)+"_"+z),J(b),k.usePeekHover&&"click"!==a.type||(h.selectGivenThumbnail(a.$declarativeParent,u),"click"===a.type&&h.useTabbedImmersiveView(k)&&(d.postCountMetric("dpcc_videoThumbClicked_"+(b.thumbnailIndex+1)+"_"+z),m.action="videoIngressClick",m.clickTimeStamp=
a.$event.timeStamp,m.$event=a.$event,m.$currentTarget=a.$currentTarget,F.dispatch("videoIngressClick",m),d.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp)))};if(k.isDPXFeatureEnabled)l.on("triggerVideoAjax",n);l.on("vsePlayer-imageblock_tablet",P)}});"use strict";w.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(l,b,a,h,g,d,f,c){function n(a){return a.hiRes||
a.large||a.main[a.main.length-1]}function G(){t.find("#ivTitle").click(function(){W.hide()})}function I(){N=Pa?{type:"360-spin"}:aa.getCurrentItem()}function C(){var a=t.find("#ivStage"),b=W.$container.find(".a-popover-wrapper"),e=b.find(".a-popover-inner"),b=b.height()-c.getDimension(e,"padding-top")-c.getDimension(e,"padding-bottom");t.css("height",b);var e=t.find("#ivTitle").outerHeight(!0),d=t.find("#ivVariationSelection").outerHeight(!0),m=t.find("#ivMediaSelection").outerHeight(!0),f=t.find("#ivThumbs"),
g=c.getDimension(f,"margin-top")+c.getDimension(f,"margin-bottom");f.css("height",b-e-d-m-g);t.find("#ivLargeImage").css("height",b);a.css("width",t.width()-c.getDimension(t,"padding-left")-c.getDimension(t,"padding-right")-t.find("#ivThumbColumn").width()-c.getDimension(a,"margin-left")-c.getDimension(a,"margin-right"))}function J(){t.find("#ivMediaSelect").change(function(){var a=b(this).val();"all"===a?(t.find("#ivVideoList").hide(),t.find("#ivThumbs").show(),t.find(".ivThumbVideo").show(),"chromeful-video"===
N.type&&t.find("#ivVideo_"+N.index).click()):"images"===a?(t.find("#ivVideoList").hide(),t.find("#ivThumbs").show(),t.find(".ivThumbVideo").hide(),"chromeful-video"===N.type&&(0===ca&&0===V?t.find("#iv360").click():0===ca?t.find("#ivHeroImage_0").click():t.find("#ivImage_0").click())):"videos"===a&&(t.find("#ivVideoList").show(),t.find("#ivThumbs").hide(),"chromeful-video"!==N.type?t.find("#ivVideoList_0").click():t.find("#ivVideoList_"+N.index).click())})}function A(){var a=t.find("#ivStage").find("#ivLargeImage"),
b=a.width(),c=a.height(),e=a.find(".fullscreen");e.removeAttr("style");var d=e.width(),m=e.height();0<e.length&&(e[0].naturalWidth&&(d=e[0].naturalWidth),e[0].naturalHeight&&(m=e[0].naturalHeight));a.css("cursor","auto");var d=0===d?1:d,m=0===m?1:m,f=Math.min(b/d,c/m),g=m*f,h=d*f;1>f?(Qa?a.css("cursor","url('"+B.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),za=!0):za=!1;d=Math.min(h,d);m=Math.min(g-20,m);e.css({"margin-top":(c-
m)/2,"margin-left":(b-d)/2,height:m,width:d});a.css("visibility","visible");Aa=!1}function y(a){var b=t.find("#ivLargeImage");b.css("visibility","hidden");b.empty();c.animateStageIn(b);b.append(a);A()}function O(){da&&da.pause();t.find("#ivLarge360").css("display","none");t.find("#ivLargeVideo").css("display","none");t.find("#ivLargeImage").css("display","none");p()}function P(e){O();t.find("#ivLargeImage").css("display","block");var d;"hero-image"===e?a.isDefined(ha)&&(d=n(ha[N.index])):a.isDefined(ja)&&
(d=n(ja[N.index]));if(a.isDefined(d)){t.find(".fullscreen").remove();var m=b("\x3cimg\x3e").attr("src",d).addClass("fullscreen"),f=t.find("#ivLargeImage");c.animateStageOut(f,function(){m.load(function(){y(m)});if(m[0].complete)y(m);else{f.empty();var a=(f.height()-104)/2,c=(f.width()-80)/2;b("\x3cimg\x3e").attr("src",B.staticImages.spinner).css({position:"relative",top:a+"px",left:c+"px"}).appendTo(f)}})}}function L(){var a=parseInt(N.index,10)+1;a>=fa.length||t.find("#ivVideo_"+a).click()}function k(){var b;
a.isDefined(fa)&&(b=fa[N.index]);if(a.isDefined(b)){O();var c=t.find("#ivLargeVideo").css("display","block");da?(da.isDetached()&&da.attach(c[0]),a.loadMediaIntoAiry(da,b,wa,B.tabletWeb),da.show()):(da=a.createAiryInstanceForChromeful(c,b,wa,"ImmersiveView"),wa.enableContinuousPlay&&da.bind("ended",L));da.play({isAsync:!0})}}function D(){I();var b;b="hero-image"===N.type?t.find("#ivHeroImage_"+N.index):"image"===N.type?t.find("#ivImage_"+N.index):"chromeful-video"===N.type||"chromeless-video"===N.type?
t.find("#ivVideo_"+N.index):"360-spin"===N.type?t.find("#iv360"):a.isDefined(ha)?t.find("#ivHeroImage_"+N.index):t.find("#ivImage_"+N.index);a.isjQueryObjDefined(b)||(b=t.find("#ivImage_0"));F(b)}function F(a){t.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(N.type="chromeful-video",N.index=a.attr("id").split("_")[1],k()):a.hasClass("ivHeroImage")?(N.type="hero-image",N.index=a.attr("id").split("_")[1],P(N.type)):a.hasClass("iv360Image")?(N.type="360-spin",
N.index=0,u()):(N.type="image",N.index=a.attr("id").split("_")[1],P(N.type))}function u(){O();t.find("#ivLarge360").css("display","block");e();var a=t.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});c.animateStageIn(a)},200);E();g.postCountMetric("dppc_click360");sa=Date.now()}function p(){0<sa&&(x("dppc_duration360",Date.now()-sa),sa=0)}function x(a,b){q.ue&&q.ue.count(a,b)}function E(){if(0<pa){var a=t.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},
200)}}function K(a,c){if(pa<a.length){var e=b("\x3cimg /\x3e").css({display:"block",width:6*na+"px",height:ra+"px"});e.hide();c.append(e);e.get(0).onload=function(){c.closest(document.documentElement).length&&(pa++,1===pa&&(E(),0<sa&&x("dppc_loadTime360",Date.now()-sa)),0<Ga&&x("dppc_perSpriteloadTime360",Date.now()-Ga),t.find("#iv360Spinner").hide(),e.show(),xa=5*S.imageLocations[Math.floor(ya/S.imageLocations[0].length)][ya%S.imageLocations[0].length],K(a,c))};e.attr("src",a[pa].replace(/(\._SP)\d+(,)\d+/,
"$1"+ta+"$2"+ua));Ga=Date.now()}}function v(b){if(a.isDefined(S.spriteWidthSizes)&&0<S.spriteWidthSizes.length){var c=S.spriteWidthSizes,e=c.length,d=c[0],m=c[e-1];if(b<=d)return d;if(b>m)return m;for(d=0;d<e;d++)if(b>c[d]&&b<=c[d+1])return c[d+1]}else return b}function e(){var a=t.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",
position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),b("\x3cimg\x3e").attr("src",B.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),Ha=!0,m())}function m(){if(a.isDefined(S.spriteURLs)&&a.isDefined(t)&&Ha&&!Ia){var c=t.find("#ivLarge360"),e=b("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,
display:"block"});a.isDefined(S.staticImages.hint360)&&b("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",S.staticImages.hint360).appendTo(e);b("\x3cdiv\x3e").css({"text-align":"center"}).text(B.staticStrings.dragToSpin).appendTo(e);e.appendTo(c);var e=S.imageWidth,d=S.imageHeight,m=c.parent().width(),f=c.parent().height(),g=0,h=0;e/d>m/f?(ta=v(m),ua=Math.round(d/e*ta),na=Math.ceil(m),ra=Math.ceil(ua/ta*m),h=(f-ra)/2):(ua=v(f),ta=Math.round(e/d*ua),ra=Math.ceil(f),
na=Math.ceil(ta/ua*f),g=(m-na)/2);c.css({"margin-left":g,"margin-top":h,width:na+"px",height:ra+"px",overflow:"hidden",position:"relative"});c.children("#image-360-sprites").css("width",6*na+"px");K(S.spriteURLs,t.find("#image-360-sprites"),0);e=t.find("#ivLarge360");e.bind("mousedown",X);e.bind("touchstart",z);e.bind("touchmove",r);e.bind("touchend",T);b(document).bind("mousemove",H);b(document).bind("mouseup",M);a.isDefined(B.staticImages.grab)&&c.css("cursor","url('"+B.staticImages.grab+"'), auto");
Ia=!0}}function z(a){Ba=!0;Ja=a.originalEvent.targetTouches[0].clientX}function r(a){Ba&&(Q(a.originalEvent.targetTouches[0].clientX-Ja),Ja=a.originalEvent.targetTouches[0].clientX)}function T(a){Ba&&(Ba=!1)}function X(b){Ca=!0;Ka=b.originalEvent.clientX;a.isDefined(B.staticImages.grabbing)&&(b=t.find("#ivLarge360"),b.css("cursor","url('"+B.staticImages.grabbing+"'), auto"),b.parents(".a-declarative").last().css("cursor","url('"+B.staticImages.grabbing+"'), auto"));return!1}function H(a){Ca&&(Q(a.originalEvent.clientX-
Ka),Ka=a.originalEvent.clientX)}function M(b){Ca&&(Ca=!1,a.isDefined(B.staticImages.grab)&&(b=t.find("#ivLarge360"),b.css("cursor","url('"+B.staticImages.grab+"'), auto"),b.parents(".a-declarative").last().css("cursor","auto")))}function Q(b){for(b=xa-=b/na*180;0>b;)b+=360;for(;360<b;)b-=360;xa=b;var c;b=360;for(var e=0;e<pa;e++)for(var d=0;d<S.imageLocations[e].length;d++){var m=Math.abs(xa-5*S.imageLocations[e][d]);m<b&&(b=m,c=e*S.imageLocations[0].length+d)}c!==ya&&(b=Math.floor(c/S.imageLocations[0].length),
b!==Math.floor(ya/S.imageLocations[0].length)&&(a.isDefined(La)||(La=document.createElement("canvas").getContext("2d")),e=t.find("#image-360-sprites").children(),La.drawImage(e[b],0,0)),b=t.find(".iv360Hint").not(".iv360HintFaded"),a.isDefined(b)&&(b.addClass("iv360HintFaded"),b.animate({opacity:0},750)));ya=c;b=c%S.imageLocations[0].length*-1*na;c=-1*Math.floor(c/S.imageLocations[0].length)*ra;e=t.find("#ivLarge360").children("#image-360-sprites");e.css("-webkit-transform","translate3d("+b+"px, "+
c+"px, 0)");e.css("transform","translate3d("+b+"px, "+c+"px, 0)")}function ba(){t.delegate(".ivThumb","click",function(){var a=b(this);F(a)});t.delegate(".ivThumbVideoListOuter","click",function(){t.find(".ivThumbVideoListOuter").removeClass("selected");var a=b(this);a.addClass("selected");N.type="chromeful-video";N.index=a.attr("id").split("_")[1];k()})}function Y(){da&&!da.isDetached()&&(wa.volume=da.getVolume(),da.detach(),!document.all||q.atob||document.addEventListener||(da=null));t.find("#ivLargeImage").empty();
p()}function R(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function ea(a){var c=qa.left-(a.pageX-Da[0])*Ea;l.capabilities.rtl&&(c=qa.left-(b(q).width()-a.pageX-Da[0])*Ea);a=qa.top-(a.pageY-Da[1])*Ea;c=R(c,Fa.left);a=R(a,Fa.top);t.find(".fullscreen").css({left:c,top:a})}function ga(){t.delegate("#ivLargeImage","click",function(a){if(Aa)A();else if(za){t.find(".fullscreen").removeAttr("style");if(za){var b=t.find("#ivLargeImage"),c=b.find(".fullscreen");Qa?b.css("cursor","url('"+B.staticImages.zoomOut+
"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));Aa=!0;var e=t.find("#ivLargeImage");Fa.left=e.width()-c.width();Fa.top=e.height()-c.height();var e=b.height()/2,d=b.width()/2;Da=[b.offset().left+d,b.offset().top+e];qa.top=e-c.height()/2;qa.left=d-c.width()/2;c.css({position:"relative",left:qa.left,top:qa.top});Ea=Math.max(c.height()/b.height(),c.width()/b.width())}ea(a)}});t.delegate("#ivLargeImage","mousemove",function(a){Aa&&ea(a)})}function la(e){if(a.isImmersiveViewEnabled(B,
aa.getCurrentItem().color))if(Ma){var m=e.$event.originalEvent;m.acknowledge&&m.acknowledge(e.$currentTarget[0]);Pa=a.isDefined(e)&&"button-360-click"===e.action;d.isEnabled&&f.logImmersiveViewRequestServed(d);g.postCountMetric("dppc_immersiveViewOpened");if(a.isDefined(W))W.show();else{e=b("#auiImmersiveViewDiv");var m=b(q).height()-150,h=b(q).width()-75;W=Ma.create(e,{name:"immersiveView",activate:"onclick",width:h,height:m,popoverLabel:"ImmersiveView",hideHeader:!0});e.click()}if(Na){t=b("#ivMain");
e=aa.getCurrentItem().color;ja=B.colorImages[e];ha=B.heroImage[e];fa=B.useChildVideos?B.colorToVideo[e]:B.videos;Oa=U()&&B.spin360ColorEnabled[e];S=U()?B.spin360ColorData[e]:ia;I();ma=V=oa=ca=0;a.isDefined(ha)&&(V=ha.length);a.isDefined(ja)&&(ca=ja.length);a.isDefined(fa)&&(oa=fa.length);Oa&&(ma=1);c.populateTitle(t.find("#ivTitle"),45,B);c.populateVariationSelection(t.find("#ivVariationSelection"));e=t.find("#ivMediaSelect");0===ca+ma||0===oa?(e.parent().hide(),t.find("#ivThumbs").addClass("noMediaSelection")):
(e.empty(),b("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(B.staticStrings.allMedia+" ("+(V+ca+ma+oa)+")").appendTo(e),b("\x3coption/\x3e").attr("value","images").text(B.staticStrings.images+" ("+(V+ca+ma)+")").appendTo(e),b("\x3coption/\x3e").attr("value","videos").text(B.staticStrings.videos+" ("+oa+")").appendTo(e),e.parent().show(),e.val("all"));e=t.find("#ivThumbs");e.find(".ivRow").not(".placeholder").remove();for(var m=V+ca+oa+ma,k=h=0;h<m;)for(var z=e.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(e),
p=0;3>p&&h<m;p++,h++,k++)if(k<V){var n=ha[h].thumb,r=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+h).appendTo(z);r.find(".ivThumbImage").css("background",'url("'+c.getResizedThumbnailURL(n)+'") center no-repeat')}else if(k>=V&&k<ca+V)n=ja[h-V].thumb,r=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(h-V)).appendTo(z),r.find(".ivThumbImage").css("background",'url("'+c.getResizedThumbnailURL(n)+
'") center no-repeat');else if(k>=V+ca&&k<ca+V+ma)r=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(z),r.find(".ivThumbImage").css("background",'url("'+(a.isDefined(B.staticImages.icon360)?c.getResizedThumbnailURL(B.staticImages.icon360,!0):"")+'") center no-repeat');else if(n=fa[h-ca-V-ma],r=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(h-ca-V-ma)).appendTo(z),r.find(".ivThumbImage").css("background",
'url("'+n.thumbUrl+'") center no-repeat'),a.isDefined(n)){var u={position:"triggerTop"},F=t.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");F.find(".ivVideoPopoverTitle").text(n.title);F.find(".ivVideoPopoverDuration").text(n.durationTimestamp);u.inlineContent=F[0];l.declarative.create(r,"a-tooltip",u)}e=t.find("#ivVideoList");e.find(".ivThumbVideoListOuter").not(".placeholder").remove();m=e.find(".placeholder");for(h=0;h<oa;h++)k=fa[h],z=m.clone().removeClass("placeholder").appendTo(e),
z.attr("id","ivVideoList_"+h),z.find(".ivThumbImage").css("background",'url("'+k.thumbUrl+'") center no-repeat'),z.find(".ivThumbTitle").text(k.title),z.find(".ivThumbDuration").text(k.durationTimestamp);t.find("#ivLarge360").empty();pa=0;Ia=Ha=!1;wa=B.airyConfig;Na=!1;Ra()}}else q.performance&&performance.now&&q.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else g.postCountMetric("immersiveViewNotExistsClickCount")}function va(b){var c=
B.colorToAsin[b],e={},d=500;if(c&&c.asin){e.params={asin:c.asin};var f="360"+c.asin,k=Date.now();e.success=function(c){x("dppc_asyncRequestTime360",Date.now()-k);c&&a.isDefined(c.spin360.spin360Model)?(a.ajaxState(f,"success"),B.spin360ColorData[b]=c.spin360.spin360Model,b===aa.getCurrentItem().color&&(S=B.spin360ColorData[b],m())):e.error()};e.error=function(){g.postCountMetric("dppc_asyncFailed360");x("dppc_asyncRequestTime360",Date.now()-k);d*=2;16E3>=d?setTimeout(function(){k=Date.now();h.load("/gp/product/features/apparel-main-image/360.html",
e)},d):a.ajaxState(f,"fail")};a.ajaxState(f)&&"fail"!==a.ajaxState(f)||(h.load("/gp/product/features/apparel-main-image/360.html",e),a.ajaxState(f,"sent"))}}function U(){return a.isDefined(B.spin360ConfigEnabled)&&B.spin360ConfigEnabled}var Z,B,aa,ka,W,t,ha,ja,fa,V,ca,oa,ma,N,da,wa,S,Oa,na,ra,ua,ta,Ka,Ja,Pa=!1,Ha=!1,Ia=!1,xa=0,ya=0,sa=0,Ga=0,Ca=!1,Ba=!1,pa=0,La,Qa=navigator.userAgent.match(/msie|trident/i),Na=!0,Aa=!1,za=!1,Fa={},qa={},Ea,Da,Ma;w.when("a-modal").execute(function(a){Ma=a});var Ra=
l.once(function(){J();ba();ga();l.on("a:popover:afterUpdatePosition:immersiveView",C);l.on("a:popover:afterShow:immersiveView",D);l.on("a:popover:afterHide:immersiveView",Y);G()});return function(e,m,f,h){Z=this;B=e;aa=m;d.refToModel=aa;ka=h;U()&&(B.spin360ColorData[B.landingAsinColor]=B.spin360ColorData[B.defaultColor],B.spin360ColorEnabled[B.landingAsinColor]=B.spin360ColorEnabled[B.defaultColor]);a.isDefined(B.staticImages.icon360)&&b("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",
c.addStyleCodeToURL(B.staticImages.icon360,"_FMpng_RI_"));Z.render=function(b,c,e,d,m,f){Na=!0;U()&&B.spin360ColorEnabled[b]&&!a.isDefined(B.spin360ColorData[b])&&(B.spin360ColorData[b]={},va(b));a.isImmersiveViewEnabled(B,aa.getCurrentItem().color)&&U()&&B.spin360ColorEnabled[b]&&(c===B.maxAlts&&(b=d.find(".item.imageThumbnail"),e=d.find(".item.videoThumbnail"),a.isDefined(e)&&1<e.length?e.last().remove():b.last().remove(),c--),b=d.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),
l.declarative.create(b,"button-360-click"),d.append(b),c++,g.postCountMetric("dppc_display360"));return c};Z.update=function(a){};a.isImmersiveViewEnabled(B,aa.getCurrentItem().color)||a.addTag("immersiveViewNotAvailable");ka.register("imageClick",la);ka.register("button360Click",la)}});"use strict";w.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(l,b,a,h,g,d,f){function c(){var a=
J.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),c=a.find(".a-popover-inner"),a=a.height()-f.getDimension(c,"padding-top")-f.getDimension(c,"padding-bottom");b("#iv-tab-view-container").css("height",a);O=b("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==b(this).css("display")}).length;1<O?(b("#iv-tab-view-container ul.iv-tab-views li").parent().show(),c=b("#iv-tab-view-container ul.iv-tab-views li").parent().height(),a-=c):b("#iv-tab-view-container ul.iv-tab-views li").parent().hide();
b("#iv-tab-view-container .iv-tab-content").css("height",a);l.trigger("dp:image-block:immersive-view:resize")}function n(){l.trigger("dp:image-block:immersive-view:reset")}function G(c){if(a.isImmersiveViewEnabled(C,J.getCurrentItem().color))if(L){var f=c.$event.originalEvent;f.acknowledge&&f.acknowledge(c.$currentTarget[0]);g.isEnabled&&d.logImmersiveViewRequestServed(g);h.postCountMetric("dppc_immersiveViewOpened");a.isDefined(c)&&("button-360-click"===c.action?b("#iv360TabHeading").click():"videoIngressClick"===
c.action?(P=c.clickTimeStamp,b("#ivVideosTabHeading").click()):b("#ivImagesTabHeading").click());f=J.getImmersiveViewModalInstance();if(a.isDefined(f))f.show();else{c=b("#auiImmersiveViewDiv");var f=Math.min(Math.max(b(q).height()-150,540),1080),p=Math.min(Math.max(b(q).width()-75,990),1980),f=L.create(c,{name:"immersiveView",activate:"onclick",width:p,height:f,popoverLabel:"ImmersiveView",hideHeader:!0});J.setImmersiveViewModalInstance(f);c.click()}y&&(y=!1,k(),l.trigger("dp:image-block:immersive-view:init"))}else q.performance&&
performance.now&&q.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else h.postCountMetric("immersiveViewNotExistsClickCount")}var I,C,J,A,y=!0,O=0,P,L;w.when("a-modal").execute(function(a){L=a});var k=l.once(function(){l.on("a:popover:afterUpdatePosition:immersiveView",c);l.on("a:popover:afterShow:immersiveView",c);l.on("a:popover:afterHide:immersiveView",n)}),D=l.once(function(){var a=b("#iv-tab-view-container ul.iv-tab-views li");a.bind("click",
function(c){var d=a.filter(".iv-active");d.attr("id")!==b(this).attr("id")&&l.trigger("dp:ivTabs:"+d.find("a").attr("data-iv-tab-view")+":deselect",c);a.removeClass("iv-active");b(this).addClass("iv-active");b("#iv-tab-view-container .iv-tab-content").hide();d=b(this).find("a").attr("data-iv-tab-view");b("#"+d).show();"ivVideosTab"===d&&(c.clickTimeStamp=P||c.timeStamp);l.trigger("dp:ivTabs:"+d+":select",c);h.postCountMetric("dppc_"+d);return!1})});return function(b,c,d,f){I=this;C=b;J=c;g.refToModel=
J;A=f;I.render=function(a,b,c,e,d,f){h.postCountMetric("dpcc_altThumbs_"+b);y=!0};I.update=function(a){};I.getTitle=function(){};I.getVariationSelectionInfo=function(){};D();a.isImmersiveViewEnabled(C,J.getCurrentItem().color)||a.addTag("immersiveViewNotAvailable");A.register("imageClick",G);A.register("button360Click",G);a.useTabbedImmersiveView(C)&&A.register("videoIngressClick",G)}});"use strict";w.when("A").register("ImageBlockLoader",function(l){return{load:function(b,a){a=a||{};a.timeout=a.timeout||
4E3;l.ajax(b,a)}}});"use strict";w.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric").register("imageBlockUtils",function(l,b,a,h,g,d,f,c){function n(a){return null!==a&&"undefined"!==typeof a}function G(a){var c=0;b.each(a,function(a,b){var e=parseInt(b[1],10);e>c&&(c=e)});return c}function I(a){var c=0;b.each(a,function(a,b){var e=parseInt(b[0],10);e>c&&(c=e)});return c}function C(a,b,c){b=b.width();if(c.naturalMainImageSize)return b;
a=G(a);0<a&&(b=Math.min(b,a));return b}function w(a,b,c){b=b.height();if(c.naturalMainImageSize)return b;a=I(a);0<a&&(b=Math.min(b,a));return b}function A(a){var c;b.each(a,function(a,b){n(c)||(c=b[1]/b[0])});return c||1}function y(a,b,c){b.fadeTo(500,0,function(){P(a,c);b.fadeTo(500,1)})}function O(a){a&&a.toggle()}function P(a,c){var d=c.find("img");n(d[a])&&b(d[a]).click()}function L(a,b){v[a]=b?b:v[a];return v[a]}function k(a,c,d){d=d||K;d=d.colorImages;if(1>d.length||!n(d[a])||!n(c))return-1;
var f=-1;b.each(d[a],function(a,b){b.variant===c&&(f=a)});return f}function D(a,c,d){d=d||K;d=d.colorImages;return!(n(d)&&n(d[a])&&n(d[a][c])&&n(d[a][c].main))||1>b.map(d[a][c].main,function(a,b){return b}).length?-1:d[a][c]}function F(a,b,c,d){d.parent().css("z-index",2);0!==c&&0!==b&&(b/=c,a>b?d.css("width",b/a*100+"%"):d.css("height",a/b*100+"%"))}function u(a,d){var g;if(g=a.useIV)g=a.colorImages&&a.colorImages[d]&&0<a.colorImages[d].length?!0:!1;f.isEnabled&&(f.IVApplicaple=g,c.logImmersiveViewApplicability(b,
f));return g}var p,x,E,K=b.extend(!0,{},g,d),v={};return{isDefined:n,isDefinedAndEmpty:function(a){return n(a)&&"object"===typeof a&&0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return n(a)?"object"===typeof a&&0===Object.keys(a).length:!0},isDefinedAndNotEmpty:function(a){return n(a)?"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:A,getMaxHeightOfMainImage:w,getMaxWidthOfMainImage:C,getMaxDimensionsOfMainImage:function(a,
b,c){if(c.acEnabled)return[b.height(),b.width()];var d=w(a,b,c);b=C(a,b,c);a=A(a);c=b/a;b=Math.min(b,d*a);d=Math.min(d,c);return[d,b]},getContainerHeight:function(a,b,c){var d=a.get(0);a=0;if(n(d)){a=d.offsetWidth/b;a=Math.min(a,c);var f;b=K.mainImageHeightPartitions;c=K.mainImageMaxSizes;if(n(c)&&n(b)){for(var g=0,h=q.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=0;d<b.length;d++)h>b[d]&&(g=d+1);c.length>=g&&(f=c[g])}n(f)&&(a=Math.min(f[1],a))}return a},getColorFromState:function(a,
c){if(a){c=c||K;var d="";b.each(c.visualDimensions,function(b,c){a[c]&&(d+=" "+a[c])});return d&&d.substring(1)}},createThumbnail:function(a,b,c,d){var f=c.find(".template").clone().removeClass("template").addClass("item"),g=document.createElement("img");g.src=b;f.find(".placeHolder").replaceWith(g);(b=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===b&&f.addClass("heroImageThumbnail");n(d)&&f.addClass(d);l.declarative.create(f,"thumb-action",a);f.attr&&f.attr("data-ux-click","");c.append(f)},
selectGivenThumbnail:function(a,b){var c=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(c,d,f,g,k,l,n,D){var u=b.extend({},f.foresterMetadataParams);null!==g&&(u.method+="."+g);var F=[];d.disabledViewIds&&(F=d.disabledViewIds);return a.embed({parentElement:c[0],streamingUrls:d.url,contentId:d.mediaObjectId,contentMinAge:Number(d.minimumAge||"")||
0,contentTitle:d.title,swfUrl:f.swfUrl,foresterMetadataParams:u,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:d.slateUrl,postMediaSlate:d.slateUrl},videoAds:f.videoAds,bindings:{play:function(){"ImmersiveView"===g?p||(p=!0,h.postCountMetric("dppc_chromefulVideoPlayedIV")):x||(x=!0,h.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:d.durationSeconds-1,type:"position",callback:function(a,b,c){k&&(y(0,l,D),O(n))}}],disabledViewIds:F})},loadMediaIntoAiry:function(a,
b,c,d){a&&a.getMediaSourceInfo()!==b.url&&(d?(E={mediaSourceInfo:[b.url],contentId:b.mediaObjectId,refTag:"vse_ib_tablet_web"},a.loadMedia(E)):a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}}))},showUnavailable:function(a){a&&(b("#imageBlock .unvailableVariation").html(a),b("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){b("#imageBlock .variationUnavailable").hide()},
fadeToThumbnail:y,toggleVideoCaption:O,selectThumbnail:P,spinner:function(a,c){var d=b("#imageBlock .a-spinner").parent();0===d.length&&(d=b("\x3cdiv\x3e\x3c/div\x3e").append(b("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),a.append(d),d.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px",
"-moz-border-radius":"20px","border-radius":"100%"}));c?d.show():d.hide();return d},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:L,getIndexForVariant:k,getImageHash:D,lazyLoadingRequired:function(a,b,c){b=Math.max(k(a.color,b.getCurrentItem().variant,c),0);b=-1!==D(a.color,b,c);a=c.colorToAsin[a.color]&&c.colorToAsin[a.color].asin;a=!a||"success"!==L(a);return!c.lazyLoadExperienceDisabled&&!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},
updateAspectRatio:F,repositionVideoBanner:function(a,b,c,d){setTimeout(function(){var c=a.width()/a.height();F(c,16,9,b)},d||0)},getVideosCount:function(a,b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?b.videos.length:0},getVideoHash:function(a,b,c){if(c.useChildVideos){if(!n(c.colorToVideo))return-1;a=c.colorToVideo[a]}else a=c.videos;return n(a)&&n(a[b])&&n(a[b].url)?a[b]:-1},isImmersiveViewEnabled:u,playVideoInImmersiveView:function(a,b){return u(a,b)&&a.useTabbedImmersiveView},
useTabbedImmersiveView:function(a){return a.useTabbedImmersiveView},getMediaSourceInfo:function(){return n(E)?E.mediaSourceInfo[0]:""},getNilgiriServiceAjaxRequest:function(a,b,c){return{requester:"DetailPageTablet",marketplaceID:c.marketPlaceID,clientPrefix:"ImageBlock_tablet",locale:c.languageCode,page:"DetailPageTablet",placement:"ImageBlock",video:{videoURL:c.url,imageURL:c.slateUrl}}},addTag:function(a){q.ue&&q.ue.tag&&q.ue.tag(a)}}});"use strict";w.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils").register("ImageBlockHeroImageView",
function(l,b,a,h){function g(c,d,g,k){if(!a.isjQueryObjDefined(c.find(".a-button-selected"))){var l=y.getCurrentItem();if(!k||"chromeless-video"!==l.type||!A.autoplayVideo){k=0;if("hero-image"===l.type){k=f(l.color,l.variant);if(-1===k)return;k=-1!==k?k:0}var n=d+k;n>=g&&(k=0,n=d);d=h.getHeroImageHash(A,l.color,k);-1!==d&&(O.dispatch("updateModel",{data:{index:k,thumbnailIndex:n,variant:d.variant,type:"hero-image"}}),d=c.find(".item").get(n),a.selectGivenThumbnail(b(d),c))}}}function d(c,d,f){if("hero-video"===
y.getCurrentItem().type)return c;d=A.heroImage&&A.heroImage[d];var h=c;a.isDefined(d)&&(b.each(d,function(b,d){c<A.maxAlts&&(a.createThumbnail({type:"hero-image",index:b,thumbnailIndex:c,variant:d.variant},d.thumb,P,"imageThumbnail"),c++)}),g(P,h,c,f));return c}function f(c,d){var f=A.heroImage;if(1>f.length||!a.isDefined(f[c])||!a.isDefined(d))return-1;var g=-1;b.each(f[c],function(a,b){b.variant===d&&(g=a)});return g}function c(){if(L.length&&A.repositionHeroImage){var b=h.getHeroDimParams(A,y.getCurrentItem()),
c;a.isDefined(b)&&(c=a.isDefined(b.xPos)?b.xPos+"px "+b.yPos+"px ":"center "+b.yPos+"px ",L.css({"background-position":c,"background-size":b.width+"px "+b.height+"px ","max-width":b.width+"px ","min-height":b.height+"px ",filter:"","-ms-filter":""}))}}function n(b,c,d,f){if(L.length&&b&&c){if("function"===typeof d||f){var g=new Image;g.onload=f?function(){L.css("background-image",'url("'+b+'")')}:d;g.src=b}d=c[1];var g=c[0],k;f||L.css({"background-image":'url("'+b+'")'});A.repositionHeroImage&&(c=
h.getHeroDimParams(A,y.getCurrentItem(),c),a.isDefined(c)&&(d=c.width,g=c.height,k=a.isDefined(c.xPos)?c.xPos+"px "+c.yPos+"px ":"center "+c.yPos+"px "));L.css({"background-position":k,"background-size":d+"px "+g+"px ","max-width":d+"px ","min-height":g+"px ",filter:"","-ms-filter":""})}}function G(a,c,d,f){a=h.getHeroImageHash(A,a,c);if(-1===a)return-1;c=b.map(a.main,function(a,b){return b})[0];n(c,a.main[c],d,f)}function q(a,b,c){if("hero-image"!==a.type)return-1;var d=f(a.color,y.getCurrentItem().variant),
d=-1!==d?d:0;if(-1===h.getHeroImageHash(A,a.color,d))return-1;var g=y.getCurrentItem();a.thumbnailIndex=g.thumbnailIndex;a.type=g.type;a.variant=g.variant;a.index=d;C(a,b,c)}function C(a,b,c){var d=h.getHeroImageHash(A,a.color,a.index),f;f=a&&k&&l.equals(a,k)?!0:!1;k||(k=a);if(!f&&a||b)G(a.color,a.index,b,c),k=a;L.removeClass("hide-background");l.trigger("dp:image-block:update",d)}var w,A,y,O,P,L,k={};return function(f,g,h,k){w=this;A=f;y=g;O=k;A.heroImage[A.landingAsinColor]=A.heroImage[A.defaultColor];
w.render=function(a,c,f,g,e,h,k){P=g;L=b("#heroImage");a=d(c,a,h);q(y.getCurrentItem(),k,h);return a};w.update=function(b){var c=b.data;"ingress"!==c.type&&L.addClass("hide-background");"swatchHover"===b.type?b.captured||(c.type=y.getCurrentItem().type,-1!==q(c)&&(b.captured=!0)):"hero-image"===c.type&&(C(c),"click"!==b.type&&A.usePeekHover||a.selectGivenThumbnail(b.$declarativeParent,P))};O.register("resize",c)}});"use strict";w.when("A","jQuery","imageBlockUtils").register("ImageBlockAltImageIngressView",
function(l,b,a){var h,g,d,f;return function(b,n,G,q){h=this;g=b;d=q;h.render=function(b,c,d,n,q,G,w){f=n;h=this;d=g.maxAlts;n=c;q=g.colorImages[b]?g.colorImages[b].length:0;q+=a.getVideosCount(b,g);b=g.heroImage[b];G=0;b&&(G=b.length);b=q+G;b>d&&(d=b-d,b=f.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),d+="+",n={type:"ingress",index:0,thumbnailIndex:c,variant:""},b.find("#altIngressText").append(d),l.declarative.create(b,"thumb-action",
n),f.append(b),n=c++);return n};h.update=function(a){"ingress"===a.data.type&&"click"===a.type&&d.dispatch("imageClick",a)}}});"use strict";w.when("imageBlockUtils").register("ImageBlockState",function(l){return function(b,a,h){this.getImageHash=function(a){var d=h.getCurrentItem();a=l.getIndexForVariant(d.color,a||"MAIN",b);return l.getImageHash(d.color,a,b)};this.onImageUpdateForTwister=function(b){a.register("updateSelection",function(a){"swatchClick"===a.type&&"function"===typeof b&&b()})}}});
"use strict";w.when("jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(l,b){function a(a,b){var c;if(b.repositionHeroImage){c=a[1];var g=a[0];if(768>=(q.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))c*=.7,g*=.7;else{var h=((q.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,h=Math.max(Math.min(h,1),0);c*=.7+.3*h;g*=.7+.3*h}c=[c,g]}return c}function h(a,f,c){var g;if(c.repositionHeroImage){var h=q.innerWidth||
document.documentElement.clientWidth||document.body.clientWidth;c=c.heroFocalPoint;if(b.isDefined(c)){g=Math.max((h-Math.min(1500,a))/2,0);var l=Math.max((h-a)/2,0);g-=l;h=Math.max(Math.min(h,1500),1024);g=g+(h-420-23)/2-a/f[1]*c}}return g}function g(a,f,c){a=a.heroImage;return!(b.isDefined(a)&&b.isDefined(a[f])&&b.isDefined(a[f][c])&&b.isDefined(a[f][c].main))||1>l.map(a[f][c].main,function(a,b){return b}).length?-1:a[f][c]}return{getHeroImageHash:g,getHeroDimParams:function(d,f,c){if(d.repositionHeroImage){if(!b.isDefined(c)){c=
g(d,f.color,f.index);if(-1===c)return;f=l.map(c.main,function(a,b){return b})[0];c=c.main[f]}f=a(c,d);d=h(f[0],c,d);return{height:f[1],width:f[0],xPos:d,yPos:75}}}}});"use strict";w.when("A","jQuery","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(l,b,a){function h(b,f){var c=l.copy(b);if(a.isDefined(b)&&b.length>f){try{for(var g=-1,h=0;h<b.length;h++){var q=b.charAt(h);if(" "===q||"."===q||"?"===q||";"===q||","===q||":"===q)g=h;if(h===f-4){c=b.substring(0,-1===g?h:g);break}}}catch(w){c=
b.substring(0,f-3)}c+="..."}return c}function g(a,b){var c=a.lastIndexOf(".");return a="_"===a.charAt(c-1)?a.substring(0,c-1)+b+a.substring(c):a.substring(0,c)+"."+b+a.substring(c)}return{getDimension:function(a,b){var c=parseInt(a.css(b),10);return isNaN(c)?0:c},attachTabSelectHandler:function(a,b){l.on("dp:ivTabs:"+a+":select",b)},attachTabDeselectHandler:function(a,b){l.on("dp:ivTabs:"+a+":deselect",b)},attachImmersiveViewResizeHandler:function(a){l.on("dp:image-block:immersive-view:resize",a)},
detachImmersiveViewResizeHandler:function(a){l.off("dp:image-block:immersive-view:resize",a)},attachImmersiveViewResetHandler:function(a){l.on("a:popover:afterHide:immersiveView",a)},hideTabHeading:function(a){b("#"+a).hide()},unhideTabHeading:function(a){b("#"+a).show()},addStyleCodeToURL:g,getResizedThumbnailURL:function(a,b){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,
"");var c="_AA50_";b&&(c+="FMpng_RI_");return g(a,c)},populateVariationSelection:function(d){if(a.isDefined(q.DetailPage)&&a.isDefined(q.DetailPage.StateController)){d.empty();var f=q.DetailPage.StateController.getState(),c=f.variation_label_order,g;for(g in c)if(c.hasOwnProperty(g)){var h=c[g],l=f.selected_variations[h],h=f.variation_display_labels[h];l&&b("\x3cdiv/\x3e").addClass("ivVariations").text(h+":"+l).appendTo(d)}}},populateTitle:function(a,b,c){a.html(c.title);a.attr("title",a.text());
a.html(h(c.title,b))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,b){a.animate({opacity:.4},100,b)},logError:function(a,b,c,g){q.ueLogError&&q.ueLogError(g,{logLevel:a,attribution:b,message:c})}}});"use strict";w.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(l,b,a,h,g){function d(){g.populateTitle(u.find("#ivTitle"),160,D)}function f(){var b=F.getCurrentItem().color;x=D.colorImages[b];
p=D.heroImage[b];E=K=0;a.isDefined(p)&&(E=p.length);a.isDefined(x)&&(K=x.length)}function c(a){return a.hiRes||a.large||a.main[a.main.length-1]}function n(){var a=u.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var f=d.width(),g=d.height();0<d.length&&(d[0].naturalWidth&&(f=d[0].naturalWidth),d[0].naturalHeight&&(g=d[0].naturalHeight));a.css("cursor","auto");var f=0===f?1:f,g=0===g?1:g,h=Math.min(b/f,c/g),k=g*h,l=f*h;1>h?(e?a.css("cursor",
"url('"+D.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),r=!0):r=!1;f=Math.min(l,f);g=Math.min(k-20,g);d.css({"margin-top":(c-g)/2,"margin-left":(b-f)/2,height:g,width:f});a.css("visibility","visible");z=!1}function q(a){var b=u.find("#ivLargeImage");b.css("visibility","hidden");b.empty();g.animateStageIn(b);b.append(a);n()}function w(d){u.find("#ivLargeImage").css("display","none");u.find("#ivLargeImage").css("display",
"block");var f;"hero-image"===d?a.isDefined(p)&&(f=c(p[v.index])):a.isDefined(x)&&(f=c(x[v.index]));if(a.isDefined(f)){u.find(".fullscreen").remove();var e=b("\x3cimg\x3e").attr("src",f).addClass("fullscreen"),h=u.find("#ivLargeImage");g.animateStageOut(h,function(){e.load(function(){q(e)});if(e[0].complete)q(e);else{h.empty();var a=(h.height()-104)/2,c=(h.width()-80)/2;b("\x3cimg\x3e").attr("src",D.staticImages.spinner).css({position:"relative",top:a+"px",left:c+"px"}).appendTo(h)}})}}function C(a){u.find(".ivThumb").removeClass("selected");
a.addClass("selected");a.hasClass("ivHeroImage")?v.type="hero-image":v.type="image";v.index=a.attr("id").split("_")[1];w(v.type);h.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(v.index,10)+1)+"_"+(E+K))}function J(){u.delegate(".ivThumb","click",function(){var a=b(this);C(a)})}function A(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function y(a){var b=X.top-(a.pageY-M[1])*H;a=A(X.left-(a.pageX-M[0])*H,T.left);b=A(b,T.top);u.find(".fullscreen").css({left:a,top:b})}function O(){u.delegate("#ivLargeImage",
"click",function(a){if(z)n();else if(r){u.find(".fullscreen").removeAttr("style");if(r){var b=u.find("#ivLargeImage"),c=b.find(".fullscreen");e?b.css("cursor","url('"+D.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));z=!0;var d=u.find("#ivLargeImage");T.left=d.width()-c.width();T.top=d.height()-c.height();var d=b.height()/2,f=b.width()/2;M=[b.offset().left+f,b.offset().top+d];X.top=d-c.height()/2;X.left=f-c.width()/2;
c.css({position:"relative",left:X.left,top:X.top});H=Math.max(c.height()/b.height(),c.width()/b.width())}y(a);h.postCountMetric("dpcc_iv_largeImageCLick")}});u.delegate("#ivLargeImage","mousemove",function(a){z&&y(a)})}function P(){u.find("#ivLargeImage").empty()}function L(c){if(m){u=b("#ivMain");f();v=F.getCurrentItem();d();g.populateVariationSelection(u.find("#ivVariationSelection"));c=u.find("#ivThumbs");c.find(".ivRow").not(".placeholder").remove();for(var e=E+K,h=0,k=0;h<e;)for(var l=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),
n=0;4>n&&h<e;n++,h++,k++)if(k<E){var r=p[h].thumb,q=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+h).appendTo(l);q.find(".ivThumbImage").css("background",'url("'+g.getResizedThumbnailURL(r)+'") center no-repeat')}else k>=E&&k<K+E&&(r=x[h-E].thumb,q=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(h-E)).appendTo(l),q.find(".ivThumbImage").css("background",'url("'+g.getResizedThumbnailURL(r)+
'") center no-repeat'));Q();m=!1}else d();c=b("#ivImagesTab").height();u.css("height",c);e=u.find("#ivTitle").outerHeight(!0);h=u.find("#ivVariationSelection").outerHeight(!0);k=u.find("#ivThumbs");l=g.getDimension(k,"margin-top")+g.getDimension(k,"margin-bottom");k.css("height",c-e-h-l);u.find("#ivLargeImage").css("height",c);c=u.find("#ivStage");e=u[0]&&u[0].getBoundingClientRect&&Math.floor(u[0].getBoundingClientRect().width)||u.width();c.css("width",e-g.getDimension(u,"padding-left")-g.getDimension(u,
"padding-right")-u.find("#ivThumbColumn").width()-g.getDimension(c,"margin-left")-g.getDimension(c,"margin-right"));v=F.getCurrentItem();c="hero-image"===v.type?u.find("#ivHeroImage_"+v.index):"image"===v.type?u.find("#ivImage_"+v.index):a.isDefined(p)?u.find("#ivHeroImage_"+v.index):u.find("#ivImage_"+v.index);a.isjQueryObjDefined(c)||(c=u.find("#ivImage_0"));C(c)}var k,D,F,u,p,x,E,K,v,e=navigator.userAgent.match(/msie|trident/i),m=!0,z=!1,r=!1,T={},X={},H,M,m=!0,Q=l.once(function(){J();O();g.attachImmersiveViewResizeHandler(L);
g.attachTabDeselectHandler("ivImagesTab",P)});return function(a,c,d,e){k=this;D=a;F=c;k.render=function(a,c,d,e,h,k){m=!0;f();0===E+K?g.hideTabHeading("ivImagesTabHeading"):g.unhideTabHeading("ivImagesTabHeading");1===E+K?b("#ivThumbs").hide():b("#ivThumbs").show()};k.update=function(a){};g.attachTabSelectHandler("ivImagesTab",L)}});"use strict";w.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",
function(l,b,a,h,g,d,f){function c(){x.delegate(".ivThumb","click",function(){var a=b(this);x.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")&&(E.type="chromeful-video",E.index=a.attr("id").split("_")[1])})}function n(){if(ga){var a=b("#ivVideosTab").height();x.css("height",a);var c=x.find(".vse-lb-container");K=a-g.getDimension(c,"padding-top")-g.getDimension(c,"padding-bottom");c.css({"max-height":a,overflow:"hidden"});if(ba){x.css({"max-width":Math.floor(1.77*
K)});return}var a=x.find(".vse-player-container"),c=x.find(".vse-video-action-strip"),d=x.find(".vse-lb-video-metadata"),f=Math.floor(K-g.getDimension(d,"height")-g.getDimension(c,"height")),e=Math.floor(1.77*f);a.css({"max-height":f,"max-width":e,marginLeft:"auto",marginRight:"auto"});d.css({"max-width":e,marginLeft:"auto",marginRight:"auto"});c.css({"max-width":e,marginLeft:"auto",marginRight:"auto"})}Y&&(a=x.find(".vse-vertical-scroll"),c=g.getDimension(a,"margin-top")+g.getDimension(a,"margin-bottom"),
a.css("max-height",K-c))}function w(){I();v&&v.pause();R=!1;M=!0;r=null;ea=!0;ga=!1}function I(){R=!1;v&&v.pause()}function C(c){r=c.clickTimeStamp?c.clickTimeStamp:l.now();a.isDefined(p)&&(p.eventTimestamp=r);Q&&(f.get(l,"#ivVideoBlock",u,Z,B),x=b("#ivVideoBlock"),F.getCurrentItem(),E=F.getCurrentItem(),la());n();R=!0;Q=!1;y()}function J(a){Q&&(x=b("#ivVideoBlock"),F.getCurrentItem(),E=F.getCurrentItem(),la());R&&y();n()}function A(a){v=a.player;ga&&(L(),y())}function y(){if(v&&R&&(x.find(".vse-lb-container").animate({opacity:1},
200),v.play(p),h.postCountMetric("dpcc_vse_videoBlock_video_played"),M)){var a=q.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,h.postTimeMetric("dpcc_vse_vitff",a),M=!1)}}function O(){l.trigger("vse:detailpage-imageblock:page:lightBoxClosed")}function P(a){e=a.popover.$popover;ga=!0;L()}function L(){ga&&ea&&R&&v&&(e.addClass(l.$(e).find(".vse-lb-container").data("cssClass")),l.trigger("vse:detailpage-imageblock:page:lightBoxOpened",{lightBoxId:"ivVideoBlock",assetSpec:p}),
n(),ea=!1)}var k,D,F,u,p,x,E,K,v,e,m,z,r,T,X,H,M=!0,Q=!0,ba=!1,Y=!1,R=!1,ea=!0,ga=!1,la=l.once(function(){c();g.attachImmersiveViewResizeHandler(J);g.attachTabDeselectHandler("ivVideosTab",I);g.attachImmersiveViewResetHandler(w)}),ia=function(c,d,f){b("#ivVideoBlockSpinner").addClass("aok-hidden");h.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+d.placement);c=F.getCurrentItem().color;c=a.getVideoHash(c,0,D);v||(v=a.createAiryInstanceForChromeful(b("#ivVideoBlock"),c,D.airyConfig,"ImmersiveView"));
ba=!0;b("#ivVideoBlock").css({"max-width":1.77*K,margin:"0 auto"});R&&ba&&v.play({isAsync:!0})},U=function(a,c,d){Q||f.get(a,"#ivVideoBlock",u,Z,B);b("#ivVideoBlockSpinner").addClass("aok-hidden")},Z=function(a,b,c){Y=!0;n()},B=function(a,b,c){h.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(b,c,f,e){k=this;D=b;F=c;k.render=function(b,c,f,e,h,k){b=F.getCurrentItem().color;c=a.getVideoHash(b,0,D);!0===k?m=D.mediaAsin:(m=D.colorToAsin[b]&&
D.colorToAsin[b].asin,m=a.isDefined(m)?m:D.mediaAsin);z=null!==D.vseVideoDataSourceTreatment&&"T1"===D.vseVideoDataSourceTreatment?"ASIN":"physicalID";T=D.contentWeblab;X=D.contentWeblabTreatment;H=D.parentAsin||"";Q=!0;-1===c?g.hideTabHeading("ivVideosTabHeading"):(g.unhideTabHeading("ivVideosTabHeading"),u={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:c.marketPlaceID,locale:c.languageCode,product:{contentID:m,contentIDType:"ASIN",parentContentID:H,parentContentIDType:"ASIN"},
video:{contentID:c.mediaObjectId,contentIDType:z,videoURL:c.url,imageURL:c.slateUrl},requestId:D.dpRequestId,weblabContext:[{name:T,assignment:X}],metadata:{ProductTitle:D.title}},p={videoUrl:u.video.videoURL,contentId:u.video.contentID,duration:0,vendorCode:"",eventTimestamp:a.isDefined(r)?r:l.now(),imageUrl:u.video.imageURL,productAsin:u.product.contentID,index:0},a.isDefinedAndNotEmpty(v)&&(v.destroy(),v=null),d.get(l,"#ivVideoBlock",u,U,ia))};k.update=function(a){};g.attachTabSelectHandler("ivVideosTab",
C);l.on("vsePlayer-detailpage-imageblock",A);l.on("a:popover:afterShow:immersiveView",P);l.on("a:popover:beforeHide:immersiveView",O)}});"use strict";w.when("A","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric","imageBlockImmersiveViewUtils","hit-spin360-feature-data","hit-spin360-constants").register("ImageBlockImmersiveView360",function(l,b,a,h,g,d,f,c,n){function q(){var a=b("#iv360Tab").height();H.css("height",a);var c=H.find("#ivTitle360").outerHeight(!0),d=H.find("#ivVariationSelection360").outerHeight(!0),
e=H.find("#ivThumbs360"),g=f.getDimension(e,"margin-top")+f.getDimension(e,"margin-bottom");e.css("height",a-c-d-g);a=H.find("#ivStage360");c=H[0]&&H[0].getBoundingClientRect&&Math.floor(H[0].getBoundingClientRect().width)||H.width();a.css("width",c-f.getDimension(H,"padding-left")-f.getDimension(H,"padding-right")-H.find("#ivThumbColumn360").width()-f.getDimension(a,"margin-left")-f.getDimension(a,"margin-right"))}function w(){y();var a=H.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});
f.animateStageIn(a)},200);C()}function C(){if(0<t){var a=H.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function J(a,c){if(t<a.length){var f=b("\x3cimg /\x3e").css({display:"block",width:6*Q+"px",height:ba+"px"});f.hide();c.append(f);f.get(0).onload=function(){c.closest(document.documentElement).length&&(t++,1===t&&(C(),0<B&&(g.time("dppc_loadTime360",Date.now()-B,r.mediaAsin),d.postTimeMetric("dppc_loadTime360",Date.now()-B))),0<aa&&(g.time("dppc_perSpriteloadTime360",
Date.now()-aa,r.mediaAsin),d.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-aa)),H.find("#iv360Spinner").hide(),f.show(),U=5*M.imageLocations[Math.floor(Z/M.imageLocations[0].length)][Z%M.imageLocations[0].length],J(a,c))};f.attr("src",a[t].replace(/(\._SP)\d+(,)\d+/,"$1"+R+"$2"+Y));aa=Date.now()}}function A(b){if(a.isDefined(M.spriteWidthSizes)&&0<M.spriteWidthSizes.length){var c=M.spriteWidthSizes,d=c.length,f=c[0],e=c[d-1];if(b<=f)return f;if(b>e)return e;for(f=0;f<d;f++)if(b>c[f]&&b<=c[f+
1])return c[f+1]}else return b}function y(){var a=H.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),b("\x3cimg\x3e").attr("src",r.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",
left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),la=!0,O())}function O(){if(a.isDefined(M.spriteURLs)&&a.isDefined(H)&&la&&!va){var c=H.find("#ivLarge360"),d=b("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});a.isDefined(M.staticImages.hint360)&&b("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",M.staticImages.hint360).appendTo(d);b("\x3cdiv\x3e").css({"text-align":"center"}).text(r.staticStrings.dragToSpin).appendTo(d);
d.appendTo(c);var d=M.imageWidth,f=M.imageHeight,e=c.parent().width(),g=c.parent().height(),h=0,l=0;d/f>e/g?(R=A(e),Y=Math.round(f/d*R),Q=Math.ceil(e),ba=Math.ceil(Y/R*e),l=(g-ba)/2):(Y=A(g),R=Math.round(d/f*Y),ba=Math.ceil(g),Q=Math.ceil(R/Y*g),h=(e-Q)/2);c.css({"margin-left":h,"margin-top":l,width:Q+"px",height:ba+"px",overflow:"hidden",position:"relative"});c.children("#image-360-sprites").css("width",6*Q+"px");J(M.spriteURLs,H.find("#image-360-sprites"),0);d=H.find("#ivLarge360");d.bind("mousedown",
D);d.bind("touchstart",P);d.bind("touchmove",L);d.bind("touchend",k);b(document).bind("mousemove",F);b(document).bind("mouseup",u);a.isDefined(r.staticImages.grab)&&c.css("cursor","url('"+r.staticImages.grab+"'), auto");va=!0}}function P(a){W=!0;ga=a.originalEvent.targetTouches[0].clientX}function L(a){W&&(p(a.originalEvent.targetTouches[0].clientX-ga),ga=a.originalEvent.targetTouches[0].clientX)}function k(a){W&&(W=!1)}function D(b){ka=!0;ea=b.originalEvent.clientX;a.isDefined(r.staticImages.grabbing)&&
(b=H.find("#ivLarge360"),b.css("cursor","url('"+r.staticImages.grabbing+"'), auto"),b.parents(".a-declarative").last().css("cursor","url('"+r.staticImages.grabbing+"'), auto"));return!1}function F(a){ka&&(p(a.originalEvent.clientX-ea),ea=a.originalEvent.clientX)}function u(b){ka&&(ka=!1,a.isDefined(r.staticImages.grab)&&(b=H.find("#ivLarge360"),b.css("cursor","url('"+r.staticImages.grab+"'), auto"),b.parents(".a-declarative").last().css("cursor","auto")))}function p(b){U-=b/Q*180;ja&&(g.count("dppc_360dragToSpin",
r.mediaAsin),d.postCountMetric("dppc_360dragToSpin"));ja=!1;for(b=U;0>b;)b+=360;for(;360<b;)b-=360;U=b;var c;b=360;for(var f=0;f<t;f++)for(var e=0;e<M.imageLocations[f].length;e++){var h=Math.abs(U-5*M.imageLocations[f][e]);h<b&&(b=h,c=f*M.imageLocations[0].length+e)}c!==Z&&(b=Math.floor(c/M.imageLocations[0].length),b!==Math.floor(Z/M.imageLocations[0].length)&&(a.isDefined(ha)||(ha=document.createElement("canvas").getContext("2d")),f=H.find("#image-360-sprites").children(),ha.drawImage(f[b],0,0)),
b=H.find(".iv360Hint").not(".iv360HintFaded"),a.isDefined(b)&&(b.addClass("iv360HintFaded"),b.animate({opacity:0},750)));Z=c;b=c%M.imageLocations[0].length*-1*Q;c=-1*Math.floor(c/M.imageLocations[0].length)*ba;f=H.find("#ivLarge360").children("#image-360-sprites");f.css("-webkit-transform","translate3d("+b+"px, "+c+"px, 0)");f.css("transform","translate3d("+b+"px, "+c+"px, 0)")}function x(){if(V){H=b("#ivMain360");var a=T.getCurrentItem().color;K()&&v(a);M=K()?r.spin360ColorData[a]:ia;f.populateTitle(H.find("#ivTitle360"),
160,r);f.populateVariationSelection(H.find("#ivVariationSelection360"));H.find("#ivLarge360").empty();t=0;va=la=!1;Z=U=0;ca();V=!1}0!==b("#iv360Tab").height()&&(f.detachImmersiveViewResizeHandler(x),q(),w(),B=Date.now(),fa=ja=!0,g.count("dppc_click360",r.mediaAsin),d.postCountMetric("dppc_click360"))}function E(b,f,e){b=r.colorToAsin[e];var k={},l=500;if(!b||!b.asin)if(e===r.defaultColor)b={asin:r.winningAsin};else return;k.params={asin:b.asin};var m="360"+b.asin,n=Date.now();k.success=function(b){g.time("dppc_asyncRequestTime360",
Date.now()-n,r.mediaAsin);d.postTimeMetric("dppc_asyncRequestTime360",Date.now()-n);b&&a.isDefined(b.spin360)?((b=b.spin360.spin360Model)&&c.setData(b),a.ajaxState(m,"success")):k.error()};k.error=function(){g.count("dppc_asyncFailedTransient360",r.mediaAsin);d.postCountMetric("dppc_asyncFailedTransient360");g.time("dppc_asyncRequestTime360",Date.now()-n,r.mediaAsin);d.postTimeMetric("dppc_asyncRequestTime360",Date.now()-n);l*=2;16E3>=l?setTimeout(function(){n=Date.now();h.load("/gp/product/features/apparel-main-image/360.html",
k)},l):(g.count("dppc_asyncFailed360",r.mediaAsin),d.postCountMetric("dppc_asyncFailed360"),a.ajaxState(m,"fail"))};a.ajaxState(m)&&"fail"!==a.ajaxState(m)||(h.load("/gp/product/features/apparel-main-image/360.html",k),a.ajaxState(m,"sent"))}function K(){return r&&a.isDefined(r.spin360ConfigEnabled)&&r.spin360ConfigEnabled}function v(b){return a.isDefinedAndNotEmpty(r.spin360ColorData[b])?!0:a.isDefined(r.spin360LazyLoadEnabled)&&r.spin360LazyLoadEnabled}function e(){fa&&(g.time("dppc_duration360",
Date.now()-B,r.mediaAsin),d.postTimeMetric("dppc_duration360",Date.now()-B),fa=!1)}function m(a){a=r.colorToAsin[a.color]&&r.colorToAsin[a.color].asin;a||(a=r.mediaAsin);return a}var z,r,T,X,H,M,Q,ba,Y,R,ea,ga,la=!1,va=!1,U=0,Z=0,B=0,aa=0,ka=!1,W=!1,t=0,ha,ja=!0,fa=!1,V=!0,ca=l.once(function(){f.attachImmersiveViewResizeHandler(x);f.attachImmersiveViewResizeHandler(q);f.attachImmersiveViewResetHandler(e);f.attachTabDeselectHandler("iv360Tab",e)});return function(e,h,k,p){z=this;r=e;T=h;X=p;e=r.landingAsinColor;
h=r.defaultColor;a.isDefined(r.staticImages.icon360)&&b("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",f.addStyleCodeToURL(r.staticImages.icon360,"_FMpng_RI_"));K()&&(r.spin360ColorData||(r.spin360ColorData={}),e===h&&a.isDefinedAndEmpty(r.spin360ColorData[h])&&delete r.spin360ColorData[h]);l.on(n.TWISTER_DATA_EVENT,function(a){m(T.getCurrentItem())===a&&(M=c.getData(a),O(),a={type:"updatedData",data:T.getCurrentItem()},X.dispatch("updateView",a))});z.render=function(e,
h,k,n,p,q){V=!0;!K()||a.isDefinedAndEmpty(r.spin360ColorData[e])&&!c.getData(m(T.getCurrentItem()))?f.hideTabHeading("iv360TabHeading"):(r.spin360ColorData[e]=c.getData(m(T.getCurrentItem())),a.isDefinedAndNotEmpty(r.spin360ColorData[e])?(b("#ivThumbs360").hide(),f.unhideTabHeading("iv360TabHeading"),a.isImmersiveViewEnabled(r,T.getCurrentItem().color)&&K()&&v(e)&&(h===r.maxAlts&&(e=n.find(".item.imageThumbnail"),h=n.find(".item.videoThumbnail"),a.isDefined(h)&&1<h.length?h.last().remove():e.last().remove()),
e=n.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),l.declarative.create(e,"button-360-click"),n.append(e),g.count("dppc_display360",r.mediaAsin),d.postCountMetric("dppc_display360"))):a.isDefined(r.spin360LazyLoadEnabled)&&r.spin360LazyLoadEnabled?(r.spin360ColorData[e]={},f.hideTabHeading("iv360TabHeading"),E(n,h,e)):f.hideTabHeading("iv360TabHeading"))};z.update=function(a){};f.attachTabSelectHandler("iv360Tab",x)}});w.register("nexusLogger360",
function(){return{count:function(l,b){q.ue&&q.ue.event({asin:b,metricName:l,metricValue:1},"hit-360","hit360.clientEvent.3")},time:function(l,b,a){q.ue&&q.ue.event({asin:a,metricName:l,metricValue:b},"hit-360","hit360.clientEvent.3")}}});w.register("hit-spin360-constants",function(){return{TWISTER_DATA_EVENT:"spin360TwisterData"}});w.when("A","hit-spin360-constants").register("hit-spin360-feature-data",function(l,b){var a={};return{setData:function(h){var g=h.asin;a[g]||(a[g]=h,l.trigger(b.TWISTER_DATA_EVENT,
g))},getData:function(b){return a[b]}}});"use strict";w.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",function(l,b){w.register("vse_ns_preLoaderHook",function(){function a(h,g){try{var d=h.A,f=h.block,c=h.request,n=h.handleFailure,q=h.handleSuccess,w=d.$;g--;var C=3-g-1,J=d.now();d.ajax("/vap/ew/componentbuilder",{params:c,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:c.timeout||5E3,withCredentials:!0,success:function(a){var b=
d.now()-J;l.postTimeMetric("vse_preLoaderHook:success:",b);l.postCountMetric("vse_preLoaderHook:success:"+c.page+":"+c.placement+":"+C);w(f).html(a);q(d,c,a)},error:function(b){l.postCountMetric("vse_preLoaderHook:error:"+c.page+":"+c.placement+":"+C);(0===b.http.status||500<=b.http.status&&599>=b.http.status)&&0<g?a(h,g):(l.postCountMetric("vse_preLoaderHook:error:",1),n(d,c,b))}})}catch(A){b.logError("FATAL","vse_ns_desktop","[vse_ns_preLoaderHook] ",A)}}return{get:function(b,g,d,f,c){a({A:b,block:g,
request:d,handleFailure:c,handleSuccess:f},3)}}});w.register("vse_ns_lazyLoaderHook",function(){function a(h,g,d){try{var f=h.A,c=h.context,n=h.handleFailure,q=h.handleSuccess;g.attr("data-configuration");var w=atob(g.attr("data-configuration")),C=JSON.parse(w),J={pageContext:c,configuration:C},A=f.now();d--;var y=3-d-1;f.ajax("/vap/ew/subcomponent/"+C.type,{params:J,paramsFormat:"json",method:"post",contentType:"application/json",timeout:c.timeout||5E3,withCredentials:!0,success:function(a){var b=
f.now()-A;l.postTimeMetric("vse_lazyLoaderHook:success:",b);l.postCountMetric("vse_lazyLoaderHook:success:"+c.page+":"+c.placement+":"+C.type+":"+y);g.html(a);q(f,J,a)},error:function(b){l.postCountMetric("vse_lazyLoaderHook:error:"+c.page+":"+c.placement+":"+C.type+":"+y);(0===b.http.status||500<=b.http.status&&599>=b.http.status)&&0<d?a(h,g,d):(l.postCountMetric("vse_lazyLoaderHook:error:",1),n(f,J,b))}})}catch(O){b.logError("FATAL","vse_ns_desktop","[vse_ns_lazyLoaderHook] ",O)}}return{get:function(b,
g,d,f,c){var l=b.$;l(g+" div[data-configuration]").each(function(){a({A:b,context:d,handleFailure:c,handleSuccess:f},l(this),3)})}}});w.register("vse_ns_videoPlayer",function(){function a(h,g,d){try{var f=h.A,c=h.block,n=h.request,q=h.handleFailure,w=h.handleSuccess,C=f.$;d--;var J=3-d-1,A=f.now();f.ajax("/vap/ew/subcomponent/vseplayer",{params:n,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:n.timeout||5E3,withCredentials:!0,success:function(a){var b=f.now()-
A;l.postTimeMetric("vse_lightPlayerLoaderHook:success:",b);l.postCountMetric("vse_lightPlayerLoaderHook:success:"+n.page+":"+n.placement+":"+J);C(c).html(a);w(f,n,a)},error:function(b){l.postCountMetric("vse_lightPlayerLoaderHook:error:"+n.page+":"+n.placement+":"+J);(0===b.http.status||500<=b.http.status&&599>=b.http.status)&&0<d?a(h,d):(l.postCountMetric("vse_lightPlayerLoaderHook:error:",1),q(f,n,b))}})}catch(y){b.logError("FATAL","vse_ns_lightPlayer","[vse_ns_lightPlayerLoaderHook] ",y)}}return{get:function(b,
g,d,f,c){a({A:b,block:g,request:d,handleFailure:c,handleSuccess:f},3)}}})});"use strict";w.when("A","ImageBlockATF","ImageBlockBTF","imageBlockUtils","postMetric").execute(function(l,b,a,h,g){var d=[0,50,100,500,1E3,2E3,3E3,3500];(function(){var b=a.colorImages,c=0,l;for(l in b)b[l]&&b[l].length&&(c+=b[l].length);b="image_size_bucket:gt"+d[d.length-1];for(l=1;l<d.length;l++)if(c<=d[l]){b="image_size_bucket:"+d[l-1]+"-"+d[l];break}g.postCountMetric(b);h.addTag(b)})();(function(){var a=b.colorImages;
a&&a.initial&&a.initial.length&&(a=a.initial.length,q.ue&&ue.count&&ue.count("altImageCount",a))})();(function(){var b=a.lazyLoadExperienceDisabled;h.isDefined(a.lazyLoadExperienceDisabled)&&!b&&(g.postCountMetric("lazyLoadingExperienceOnTwisterUpdateEnabled"),h.addTag("lazyLoadingExperienceOnTwisterUpdateEnabled"))})()});w.when("A","get-resource-time","postMetric","afterLoad").execute(function(l,b,a){var h=l.state("desktop-landing-image-data");h&&(h=l.values(h),b=b.getResourceTimeByName("img",h),
l.each(b,function(b){b&&(b.responseEnd&&a.postCountMetric("ibDesktopLandingImageDownloadTime",q.parseInt(b.responseEnd)),b.transferSize?a.postCountMetric("ibDesktopLandingImageSizeInBytes",q.parseInt(b.transferSize)):0===b.transferSize&&a.postCountMetric("ibDesktopLandingImageCached",1))}))})});